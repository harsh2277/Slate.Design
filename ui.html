<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design System JSON Maker</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            /* Single Primary Color - Neon Green */
            --primary: #C8FF00;
            --primary-hover: #B3E600;

            /* Dark Mode Backgrounds */
            --bg-app: #0A0A0A;
            --bg-card: #141414;
            --bg-hover: #1F1F1F;

            /* Dark Mode Borders */
            --border: #2A2A2A;

            /* Dark Mode Text Colors */
            --text-primary: #FFFFFF;
            --text-secondary: #A1A1A1;
            --text-tertiary: #737373;
            --text-inverse: #0A0A0A;

            /* Spacing */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-6: 24px;
            --space-8: 32px;

            /* Border Radius */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;

            /* Sidebar */
            --sidebar-width: 72px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'SF Pro Display', 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-app);
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.5;
            overflow: hidden;
            height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        }

        /* Welcome Screen Styles - PencilColor Design */
        .welcome-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
            padding: 0;
            background: #1A1A1A;
            overflow: hidden;
            position: relative;
        }

        .welcome-screen.hidden {
            display: none;
        }

        .welcome-card {
            width: 100%;
            height: 100vh;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 60px 40px 40px;
            background: #2A2A2A;
            position: relative;
        }

        .welcome-header {
            flex-shrink: 0;
            margin-top: 0;
            padding-top: 136px;
        }

        .welcome-version-badge {
            display: block;
            background: transparent;
            color: #FFFFFF;
            padding: 0;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 60px;
            border: none;
            letter-spacing: 0.5px;
        }

        .welcome-logo-container {
            margin-bottom: 28px;
            display: flex;
            justify-content: center;
        }

        .welcome-logo-container svg {
            width: 64px;
            height: 64px;
        }

        .welcome-logo-container svg path {
            fill: var(--primary);
        }

        .welcome-title {
            font-size: 36px;
            font-weight: 400;
            margin-bottom: 0;
            color: #FFFFFF;
            letter-spacing: -0.5px;
            line-height: 1.2;
        }

        .welcome-title-brand {
            font-size: 36px;
            font-weight: 400;
            font-style: italic;
            color: #FFFFFF;
            letter-spacing: -0.5px;
            display: block;
            margin-top: 4px;
        }

        .welcome-subtitle {
            font-size: 14px;
            color: #999999;
            line-height: 1.6;
            margin: 24px auto 0;
            max-width: 360px;
        }

        .welcome-features-grid {
            display: none;
        }

        .welcome-cta-buttons {
            display: flex;
            gap: 0;
            justify-content: center;
            flex-shrink: 0;
            margin-bottom: 24px;
            width: 100%;
        }

        .welcome-cta-buttons .btn {
            width: 100%;
            max-width: 480px;
            padding: 16px 32px;
            font-size: 15px;
            font-weight: 600;
            border-radius: 100px;
            background: #FFFFFF;
            color: #2A2A2A;
            border: none;
        }

        .welcome-cta-buttons .btn-primary:hover {
            background: #F0F0F0;
        }

        .welcome-footer {
            display: flex;
            flex-direction: column;
            gap: 24px;
            padding: 0;
            margin-top: auto;
        }

        .welcome-footer-bottom {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .welcome-footer-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .welcome-footer-logo {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 600;
            color: #FFFFFF;
        }

        .welcome-footer-logo svg {
            width: 20px;
            height: 20px;
        }

        .welcome-footer-email {
            font-size: 12px;
            color: #999999;
            text-decoration: none;
        }

        .welcome-footer-right {
            font-size: 12px;
            color: #999999;
        }

        .app-container {
            display: flex;
            height: 100vh;
            background: var(--bg-app);
        }

        .app-container.hidden {
            display: none;
        }

        /* Left Sidebar Navigation - Floating Modern Design */
        .sidebar {
            width: 64px;
            background: #1E1E1E;
            border: 2px solid #2A2A2A;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 0;
            flex-shrink: 0;
            margin: 12px;
            height: calc(100vh - 24px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .sidebar-logo {
            width: 32px;
            height: 32px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border-radius: 12px;
            padding: 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sidebar-logo:hover {
            transform: scale(1.05);
        }

        .sidebar-logo svg {
            width: 40px;
            height: 40px;
        }

        .sidebar-logo svg path {
            fill: var(--primary);
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            padding: 0 12px;
        }

        .sidebar-item {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #6B7280;
            background: transparent;
            position: relative;
        }


        .sidebar-item.active {
            background: #C8FF00;
            color: #0A0A0A;
        }

        .sidebar-item.active::after {
            display: none;
        }

        .sidebar-item svg {
            width: 20px;
            height: 20px;
        }

        .sidebar-divider {
            width: 40px;
            background: #2A2A2A;
            margin: 10px 0;
        }

        .sidebar-actions {
            margin-top: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
            padding: 0 12px;
            padding-top: 12px;
        }

        /* Main Content Area */
        .main-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 12px 12px 12px 0;
        }

        /* Top Header - Floating Design */
        .top-header {
            height: 56px;
            background: #1E1E1E;
            border: 2px solid #2A2A2A;
            border-radius: 12px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            flex-shrink: 0;
            margin-bottom: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .header-title {
            font-size: 16px;
            font-weight: 500;
            color: var(--text-primary);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: transparent;
        }

        /* Content Area - Floating Design */
        .content-wrapper {
            flex: 1;
            display: flex;
            justify-content: center;
            overflow: hidden;
            background: transparent;
        }

        .content {
            width: 100%;
            overflow-y: auto;
            padding: 10px;
            background: #1E1E1E;
            border: 2px solid #2A2A2A;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .tab-content {
            display: none;
            width: 100%;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .empty-state {
            text-align: center;
            color: var(--text-secondary);
            padding: var(--space-12) var(--space-8);
        }

        .empty-state-icon {
            font-size: 56px;
            margin-bottom: var(--space-5);
            opacity: 0.15;
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: var(--space-2);
            color: var(--text-primary);
            letter-spacing: -0.4px;
        }

        .empty-state-description {
            font-size: 14px;
            color: var(--text-tertiary);
            line-height: 1.6;
        }

        /* Buttons - Clean Flat Design */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            justify-content: center;
        }

        .btn svg {
            width: 16px;
            height: 16px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--text-inverse);
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 12px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Scrollbar - Hidden */
        ::-webkit-scrollbar {
            width: 0px;
            height: 0px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: transparent;
        }



        /* Hide scrollbar for IE and Edge */
        * {
            -ms-overflow-style: none;
        }

        /* Color Shades Grid */
        .color-shades-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 12px;
        }

        .color-shades-grid-small {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .color-swatch {
            border-radius: var(--radius-md);
            padding: 0;
            border: 1px solid var(--border);
            transition: all 0.2s;
            cursor: pointer;
            background: var(--bg-card);
            overflow: hidden;
        }

        .color-swatch:hover {
            transform: translateY(-2px);
            border-color: var(--primary);
        }

        .color-swatch-preview {
            width: 100%;
            height: 64px;
            border: none;
        }

        .color-swatch-name {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-primary);
            padding: 8px 10px 4px;
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
        }

        .color-swatch-value {
            font-size: 10px;
            color: var(--text-tertiary);
            padding: 0 10px 8px;
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
        }

        /* Spacing List */
        .spacing-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 12px;
        }

        .spacing-token {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            transition: all 0.2s;
            cursor: pointer;
            gap: var(--space-2);
        }

        .spacing-token:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .spacing-token-name {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-tertiary);
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
            text-align: center;
        }

        .spacing-token-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
        }

        /* Card Styles - Clean Flat Design */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 0;
            margin-bottom: var(--space-4);
            transition: all 0.2s;
        }

        .card:hover {
            border-color: var(--primary);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            cursor: pointer;
            user-select: none;
            border-bottom: 1px solid #2A2A2A;
            transition: all 0.2s;
            background: transparent;
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
        }

        .card-header:hover {
            background: rgba(200, 255, 0, 0.05);
        }

        .card.collapsed .card-header {
            border-bottom: none;
            background: transparent;
            border-radius: var(--radius-lg);
        }

        .card-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title svg {
            width: 24px;
            height: 24px;
            color: var(--primary);
        }

        .card-header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .collapse-arrow {
            width: 20px;
            height: 20px;
            color: var(--text-tertiary);
            transition: transform 0.3s;
        }

        .card.collapsed .collapse-arrow {
            transform: rotate(-90deg);
        }

        .card-body {
            padding: 20px;
            transition: all 0.2s;
            overflow: hidden;
        }

        .card.collapsed .card-body {
            display: none !important;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #2A2A2A;
            transition: 0.3s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background: #737373;
            transition: 0.3s;
            border-radius: 50%;
        }

        .toggle-switch input:checked+.toggle-slider {
            background: var(--primary);
        }

        .toggle-switch input:checked+.toggle-slider:before {
            transform: translateX(20px);
        }

        .toggle-switch:hover .toggle-slider {
            opacity: 0.8;
        }

        /* Range Slider Styling - Enhanced */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #2A2A2A;
            outline: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        input[type="range"]:hover {
            background: #3A3A3A;
        }

        input[type="range"]:focus-visible {
            outline: 2px solid var(--primary);
        }

        input[type="range"]::-webkit-slider-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #2A2A2A;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: all 0.2s;
            border: 3px solid var(--bg-card);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            background: var(--primary-hover);
        }

        input[type="range"]::-webkit-slider-thumb:active {
            transform: scale(1.1);
        }

        input[type="range"]::-moz-range-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #2A2A2A;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: 3px solid var(--bg-card);
            transition: all 0.2s;
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.2);
            background: var(--primary-hover);
        }

        input[type="range"]::-moz-range-thumb:active {
            transform: scale(1.1);
        }

        /* Typography Styles */
        .card {
            transition: all 0.2s ease;
            overflow: visible !important;
        }

        .card .card-body {
            overflow: visible !important;
        }

        .card:hover {
            box-shadow: var(--shadow-sm);
        }

        /* Input & Select Styles - Enhanced Accessibility */
        input[type="color"] {
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none;
            width: 48px;
            height: 48px;
            border: 3px solid #2A2A2A;
            border-radius: 12px;
            background: transparent;
            padding: 0;
        }

        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
            border-radius: 8px;
        }

        input[type="color"]::-webkit-color-swatch {
            border: none;
            border-radius: 8px;
        }

        input[type="color"]::-moz-color-swatch {
            border: none;
            border-radius: 8px;
        }

        input[type="color"]:hover {
            transform: scale(1.05);
            border-color: var(--primary);
        }

        input[type="color"]:focus-visible {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(200, 255, 0, 0.2);
        }

        select {
            background: #0A0A0A;
            border: 2px solid #2A2A2A;
            border-radius: 10px;
            padding: 10px 16px;
            font-size: 14px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            outline: none;
            min-width: 80px;
        }

        select:hover {
            border-color: #3A3A3A;
            background: #141414;
        }

        select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(200, 255, 0, 0.1);
        }

        input[type="number"] {
            background: #0A0A0A;
            border: 2px solid #2A2A2A;
            border-radius: 10px;
            padding: 10px 16px;
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 600;
            transition: all 0.2s;
            outline: none;
        }
        input[type="number"]:hover {
            border-color: var(--text-tertiary);
        }

        input[type="number"]:focus {
            border-color: var(--primary);
        }

        /* Font Dropdown Styles */
        .font-dropdown-selected:hover {
            border-color: var(--primary) !important;
        }

        .font-dropdown-menu {
            animation: slideDown 0.2s ease;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .font-option:active {
            background: var(--primary-light) !important;
        }

        /* Custom scrollbar for font list */
        #primaryFontList::-webkit-scrollbar,
        #secondaryFontList::-webkit-scrollbar {
            width: 8px;
        }

        #primaryFontList::-webkit-scrollbar-track,
        #secondaryFontList::-webkit-scrollbar-track {
            background: var(--bg-app);
            border-radius: var(--radius-sm);
        }

        #primaryFontList::-webkit-scrollbar-thumb,
        #secondaryFontList::-webkit-scrollbar-thumb {
            background: #2A2A2A;
            border-radius: var(--radius-sm);
        }

        #primaryFontList::-webkit-scrollbar-thumb:hover,
        #secondaryFontList::-webkit-scrollbar-thumb:hover {
            background: #3A3A3A;
        }

        /* Badge Styles */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        .badge-primary {
            background: var(--primary-light);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .badge-success {
            background: var(--success-light);
            color: var(--success);
        }

        .badge-info {
            background: var(--info-light);
            color: var(--info);
        }
    </style>
</head>

<body>
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-card">            
            <div class="welcome-header">
                <div class="welcome-logo-container">
                    <svg viewBox="0 0 92 92" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M46 82.225C46 84.448 44.1934 86.2709 41.9816 86.0489C35.4407 85.3927 29.1381 83.1415 23.6383 79.4667C17.0192 75.0439 11.8603 68.7577 8.81387 61.403C5.76744 54.0483 4.97036 45.9554 6.52341 38.1476C8.07647 30.3399 11.9099 23.168 17.539 17.539C23.168 11.9099 30.3399 8.07646 38.1476 6.52341C45.9554 4.97036 54.0483 5.76744 61.403 8.81387C68.7578 11.8603 75.0439 17.0192 79.4667 23.6383C83.1415 29.1381 85.3927 35.4407 86.0489 41.9816C86.2709 44.1934 84.448 46 82.225 46V46C80.0021 46 78.2259 44.191 77.9488 41.9854C77.3273 37.0394 75.5631 32.2859 72.7733 28.1107C69.2352 22.8154 64.2062 18.6882 58.3224 16.2511C52.4386 13.814 45.9643 13.1763 39.7181 14.4187C33.4719 15.6612 27.7344 18.7279 23.2312 23.2312C18.7279 27.7344 15.6612 33.4719 14.4187 39.7181C13.1763 45.9643 13.814 52.4386 16.2511 58.3224C18.6882 64.2062 22.8154 69.2352 28.1107 72.7733C32.2859 75.5631 37.0394 77.3273 41.9854 77.9488C44.191 78.2259 46 80.0021 46 82.225V82.225Z" fill="white"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M70.8811 49.8738C69.7147 44.6855 62.416 44.7179 61.2942 49.9163L61.2515 50.1146L61.1682 50.4994C59.9448 56.0557 55.539 60.3194 50.0046 61.2959C44.6651 62.2381 44.6652 70.0119 50.0046 70.9541C55.5583 71.9339 59.9755 76.2241 61.1809 81.809L61.2942 82.3337C62.416 87.5321 69.7147 87.5645 70.8811 82.3762L71.019 81.7647C72.27 76.1998 76.6939 71.941 82.2386 70.9627C87.5871 70.0189 87.5871 62.2311 82.2386 61.2873C76.7234 60.3142 72.317 56.0952 71.039 50.5738C71.0033 50.4195 70.9701 50.272 70.9344 50.1114L70.8811 49.8738Z" fill="white"/>
                    </svg>
                </div>

                <h1 class="welcome-title">Welcome to</h1>
                <span class="welcome-title-brand">Design System Maker</span>
                
                <p class="welcome-subtitle">Your new home for beautiful, accessible design systems.</p>
            </div>

            <div class="welcome-footer">
                <div class="welcome-cta-buttons">
                    <button class="btn btn-primary" onclick="startApp()">
                        Continue
                    </button>
                </div>
                
                <div class="welcome-footer-bottom">
                    <div class="welcome-footer-left">
                        <a href="mailto:help@designsystem.com" class="welcome-footer-email">help@designsystem.com</a>
                    </div>
                    <div class="welcome-footer-right">
                        Developed by @Harsh Vaghela
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="app-container hidden" id="appContainer">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <div class="sidebar-logo">
                <svg viewBox="0 0 92 92" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M46 82.225C46 84.448 44.1934 86.2709 41.9816 86.0489C35.4407 85.3927 29.1381 83.1415 23.6383 79.4667C17.0192 75.0439 11.8603 68.7577 8.81387 61.403C5.76744 54.0483 4.97036 45.9554 6.52341 38.1476C8.07647 30.3399 11.9099 23.168 17.539 17.539C23.168 11.9099 30.3399 8.07646 38.1476 6.52341C45.9554 4.97036 54.0483 5.76744 61.403 8.81387C68.7578 11.8603 75.0439 17.0192 79.4667 23.6383C83.1415 29.1381 85.3927 35.4407 86.0489 41.9816C86.2709 44.1934 84.448 46 82.225 46V46C80.0021 46 78.2259 44.191 77.9488 41.9854C77.3273 37.0394 75.5631 32.2859 72.7733 28.1107C69.2352 22.8154 64.2062 18.6882 58.3224 16.2511C52.4386 13.814 45.9643 13.1763 39.7181 14.4187C33.4719 15.6612 27.7344 18.7279 23.2312 23.2312C18.7279 27.7344 15.6612 33.4719 14.4187 39.7181C13.1763 45.9643 13.814 52.4386 16.2511 58.3224C18.6882 64.2062 22.8154 69.2352 28.1107 72.7733C32.2859 75.5631 37.0394 77.3273 41.9854 77.9488C44.191 78.2259 46 80.0021 46 82.225V82.225Z" fill="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M70.8811 49.8738C69.7147 44.6855 62.416 44.7179 61.2942 49.9163L61.2515 50.1146L61.1682 50.4994C59.9448 56.0557 55.539 60.3194 50.0046 61.2959C44.6651 62.2381 44.6652 70.0119 50.0046 70.9541C55.5583 71.9339 59.9755 76.2241 61.1809 81.809L61.2942 82.3337C62.416 87.5321 69.7147 87.5645 70.8811 82.3762L71.019 81.7647C72.27 76.1998 76.6939 71.941 82.2386 70.9627C87.5871 70.0189 87.5871 62.2311 82.2386 61.2873C76.7234 60.3142 72.317 56.0952 71.039 50.5738C71.0033 50.4195 70.9701 50.272 70.9344 50.1114L70.8811 49.8738Z" fill="white"/>
                    <path
                        d="M479.893 65.4765V36.9933H488.045V42.1821H488.375C488.706 41.3725 489.11 40.6181 489.587 39.9189C490.064 39.2197 490.633 38.6125 491.294 38.0973C491.992 37.5453 492.781 37.1221 493.663 36.8277C494.581 36.4965 495.609 36.3309 496.747 36.3309C498.106 36.3309 499.354 36.5701 500.492 37.0485C501.631 37.4901 502.604 38.1709 503.411 39.0909C504.219 40.0109 504.843 41.1333 505.284 42.4581C505.761 43.7829 506 45.3101 506 47.0397V65.4765H497.849V48.1437C497.849 44.4637 496.251 42.6237 493.057 42.6237C492.433 42.6237 491.808 42.7157 491.184 42.8997C490.597 43.0469 490.064 43.3045 489.587 43.6725C489.11 44.0037 488.724 44.4269 488.43 44.9421C488.173 45.4573 488.045 46.0645 488.045 46.7637V65.4765H479.893Z"
                        fill="#08103B" />
                    <path
                        d="M475.399 68.3469C475.399 71.3645 474.132 73.5909 471.598 75.0261C469.065 76.4613 465.081 77.1789 459.646 77.1789C456.929 77.1789 454.689 77.0133 452.927 76.6821C451.164 76.3877 449.751 75.9461 448.686 75.3573C447.658 74.7685 446.923 74.0693 446.483 73.2597C446.079 72.4501 445.877 71.5669 445.877 70.6101C445.877 68.9909 446.354 67.7581 447.309 66.9117C448.264 66.1021 449.604 65.4765 451.33 65.0349V64.7037C450.118 64.3357 449.145 63.8205 448.41 63.1581C447.713 62.4589 447.364 61.4837 447.364 60.2325C447.364 58.8341 447.823 57.8037 448.741 57.1413C449.696 56.4789 450.944 55.9637 452.486 55.5957V55.2645C450.797 54.4549 449.475 53.3141 448.521 51.8421C447.603 50.3701 447.144 48.5853 447.144 46.4877C447.144 44.8317 447.437 43.3781 448.025 42.1269C448.612 40.8389 449.439 39.7717 450.503 38.9253C451.605 38.0789 452.909 37.4349 454.414 36.9933C455.919 36.5517 457.608 36.3309 459.481 36.3309C461.28 36.3309 462.951 36.5333 464.493 36.9381V35.3925C464.493 34.2885 464.879 33.3685 465.65 32.6325C466.421 31.8965 467.486 31.5285 468.844 31.5285H473.856V37.4901H467.027V37.9869C468.569 38.7965 469.762 39.9189 470.607 41.3541C471.488 42.7525 471.929 44.4637 471.929 46.4877C471.929 48.1437 471.635 49.5973 471.047 50.8485C470.46 52.0997 469.615 53.1669 468.514 54.0501C467.412 54.8965 466.09 55.5405 464.548 55.9821C463.043 56.4237 461.354 56.6445 459.481 56.6445C458.637 56.6445 457.829 56.6077 457.058 56.5341C456.287 56.4237 455.552 56.2765 454.855 56.0925C454.451 56.3133 454.102 56.5893 453.808 56.9205C453.551 57.2517 453.423 57.6749 453.423 58.1901C453.423 58.6317 453.533 58.9813 453.753 59.2389C453.973 59.4965 454.267 59.6989 454.634 59.8461C455.038 59.9565 455.497 60.0301 456.011 60.0669C456.525 60.1037 457.058 60.1221 457.608 60.1221H464.108C466.127 60.1221 467.853 60.3245 469.285 60.7293C470.717 61.1341 471.892 61.7045 472.81 62.4405C473.728 63.1765 474.389 64.0413 474.793 65.0349C475.197 66.0285 475.399 67.1325 475.399 68.3469ZM467.688 68.9541C467.688 68.2181 467.394 67.6293 466.806 67.1877C466.219 66.7829 465.099 66.5805 463.447 66.5805H453.698C452.964 67.2061 452.596 67.9789 452.596 68.8989C452.596 69.7821 452.964 70.4997 453.698 71.0517C454.469 71.6405 455.754 71.9349 457.553 71.9349H462.345C464.218 71.9349 465.576 71.6773 466.421 71.1621C467.265 70.6469 467.688 69.9109 467.688 68.9541ZM459.481 51.4557C461.133 51.4557 462.327 51.0509 463.061 50.2413C463.832 49.4317 464.218 48.4013 464.218 47.1501V45.8253C464.218 44.5741 463.832 43.5437 463.061 42.7341C462.327 41.9245 461.133 41.5197 459.481 41.5197C457.865 41.5197 456.691 41.9245 455.956 42.7341C455.222 43.5437 454.855 44.5741 454.855 45.8253V47.1501C454.855 48.4013 455.222 49.4317 455.956 50.2413C456.691 51.0509 457.865 51.4557 459.481 51.4557Z"
                        fill="#08103B" />
                    <path
                        d="M428.549 33.35C426.713 33.35 425.428 32.982 424.694 32.246C423.996 31.4732 423.647 30.5532 423.647 29.486V27.8852C423.647 26.7812 423.996 25.8612 424.694 25.1252C425.428 24.3892 426.713 24.0212 428.549 24.0212C430.385 24.0212 431.652 24.3892 432.349 25.1252C433.084 25.8612 433.451 26.7812 433.451 27.8852V29.486C433.451 30.5532 433.084 31.4732 432.349 32.246C431.652 32.982 430.385 33.35 428.549 33.35ZM415.441 59.1284H424.473V43.3412H415.441V36.9932H432.625V59.1284H440.997V65.4764H415.441V59.1284Z"
                        fill="#08103B" />
                    <path
                        d="M393.431 66.1389C390.273 66.1389 387.519 65.6605 385.169 64.7037C382.856 63.7469 381.112 62.4405 379.937 60.7845L384.508 56.5341C385.61 57.7485 386.895 58.7053 388.364 59.4045C389.869 60.0669 391.577 60.3981 393.486 60.3981C395.102 60.3981 396.368 60.1589 397.286 59.6805C398.204 59.1653 398.663 58.3925 398.663 57.3621C398.663 56.5525 398.351 56.0005 397.727 55.7061C397.103 55.3749 396.24 55.1173 395.138 54.9333L390.567 54.2157C389.282 54.0317 388.088 53.7557 386.987 53.3877C385.885 52.9829 384.931 52.4493 384.123 51.7869C383.315 51.1245 382.673 50.3149 382.195 49.3581C381.718 48.4013 381.479 47.2421 381.479 45.8805C381.479 42.8997 382.617 40.5629 384.894 38.8701C387.171 37.1773 390.365 36.3309 394.477 36.3309C397.268 36.3309 399.636 36.7173 401.583 37.4901C403.565 38.2261 405.144 39.2933 406.319 40.6917L402.243 45.3285C401.399 44.4085 400.316 43.6357 398.994 43.0101C397.672 42.3845 396.075 42.0717 394.202 42.0717C391.044 42.0717 389.465 43.0285 389.465 44.9421C389.465 45.7885 389.778 46.3773 390.402 46.7085C391.026 47.0029 391.889 47.2421 392.99 47.4261L397.507 48.1437C398.792 48.3277 399.985 48.6221 401.087 49.0269C402.188 49.3949 403.143 49.9101 403.951 50.5725C404.795 51.2349 405.456 52.0445 405.934 53.0013C406.411 53.9581 406.65 55.1173 406.65 56.4789C406.65 59.4597 405.493 61.8149 403.18 63.5445C400.903 65.2741 397.654 66.1389 393.431 66.1389Z"
                        fill="#08103B" />
                    <path
                        d="M361.508 66.1389C356.734 66.1389 353.117 64.8141 350.657 62.1645C348.197 59.5149 346.967 55.9085 346.967 51.3453C346.967 49.0269 347.279 46.9477 347.903 45.1077C348.564 43.2309 349.482 41.6485 350.657 40.3605C351.869 39.0357 353.319 38.0421 355.008 37.3797C356.734 36.6805 358.662 36.3309 360.792 36.3309C362.921 36.3309 364.831 36.6805 366.52 37.3797C368.209 38.0421 369.641 38.9989 370.816 40.2501C371.991 41.5013 372.89 43.0285 373.514 44.8317C374.175 46.5981 374.506 48.5853 374.506 50.7933V53.2221H355.063V53.7189C355.063 55.5589 355.633 57.0493 356.771 58.1901C357.909 59.2941 359.58 59.8461 361.783 59.8461C363.472 59.8461 364.922 59.5333 366.134 58.9077C367.346 58.2453 368.392 57.3805 369.273 56.3133L373.68 61.1157C372.578 62.4773 371.036 63.6549 369.053 64.6485C367.07 65.6421 364.555 66.1389 361.508 66.1389ZM360.847 42.1821C359.084 42.1821 357.67 42.7341 356.606 43.8381C355.578 44.9053 355.063 46.3589 355.063 48.1989V48.6405H366.52V48.1989C366.52 46.3221 366.006 44.8501 364.977 43.7829C363.986 42.7157 362.609 42.1821 360.847 42.1821Z"
                        fill="#08103B" />
                    <path
                        d="M314.713 26.9468H327.106C332.283 26.9468 336.12 28.6028 338.617 31.9148C341.114 35.2268 342.362 39.9924 342.362 46.2116C342.362 52.4308 341.114 57.1964 338.617 60.5084C336.12 63.8204 332.283 65.4764 327.106 65.4764H314.713V26.9468ZM326.555 58.9628C329.015 58.9628 330.814 58.1716 331.952 56.5892C333.091 55.0068 333.66 52.7068 333.66 49.6892V42.6788C333.66 39.698 333.091 37.4164 331.952 35.834C330.814 34.2516 329.015 33.4604 326.555 33.4604H322.865V58.9628H326.555Z"
                        fill="#08103B" />
                    <path
                        d="M294.686 66.1389C292.63 66.1389 291.143 65.6973 290.225 64.8141C289.344 63.8941 288.903 62.8085 288.903 61.5573V59.6253C288.903 58.3741 289.344 57.3069 290.225 56.4237C291.143 55.5037 292.63 55.0437 294.686 55.0437C296.742 55.0437 298.211 55.5037 299.092 56.4237C300.01 57.3069 300.469 58.3741 300.469 59.6253V61.5573C300.469 62.8085 300.01 63.8941 299.092 64.8141C298.211 65.6973 296.742 66.1389 294.686 66.1389Z"
                        fill="#08103B" />
                    <path
                        d="M262.432 66.1389C257.659 66.1389 254.042 64.8141 251.582 62.1645C249.122 59.5149 247.892 55.9085 247.892 51.3453C247.892 49.0269 248.204 46.9477 248.828 45.1077C249.489 43.2309 250.407 41.6485 251.582 40.3605C252.794 39.0357 254.244 38.0421 255.933 37.3797C257.659 36.6805 259.587 36.3309 261.716 36.3309C263.846 36.3309 265.755 36.6805 267.444 37.3797C269.133 38.0421 270.565 38.9989 271.74 40.2501C272.915 41.5013 273.815 43.0285 274.439 44.8317C275.1 46.5981 275.431 48.5853 275.431 50.7933V53.2221H255.988V53.7189C255.988 55.5589 256.557 57.0493 257.696 58.1901C258.834 59.2941 260.505 59.8461 262.708 59.8461C264.397 59.8461 265.847 59.5333 267.059 58.9077C268.271 58.2453 269.317 57.3805 270.198 56.3133L274.604 61.1157C273.503 62.4773 271.961 63.6549 269.978 64.6485C267.995 65.6421 265.48 66.1389 262.432 66.1389ZM261.771 42.1821C260.009 42.1821 258.595 42.7341 257.53 43.8381C256.502 44.9053 255.988 46.3589 255.988 48.1989V48.6405H267.444V48.1989C267.444 46.3221 266.93 44.8501 265.902 43.7829C264.911 42.7157 263.534 42.1821 261.771 42.1821Z"
                        fill="#08103B" />
                    <path
                        d="M230.839 65.4764C227.902 65.4764 225.717 64.7036 224.285 63.158C222.853 61.6124 222.137 59.6436 222.137 57.2516V43.3412H214.426V36.9932H219.438C220.65 36.9932 221.513 36.754 222.027 36.2756C222.541 35.7972 222.798 34.914 222.798 33.626V26.9468H230.289V36.9932H241.359V43.3412H230.289V59.1284H241.359V65.4764H230.839Z"
                        fill="#08103B" />
                    <path
                        d="M205.911 65.4765C204.222 65.4765 202.863 65.0533 201.835 64.2069C200.807 63.3237 200.201 62.0725 200.017 60.4533H199.742C199.228 62.3301 198.2 63.7469 196.658 64.7037C195.152 65.6605 193.298 66.1389 191.095 66.1389C188.341 66.1389 186.119 65.4029 184.43 63.9309C182.778 62.4221 181.952 60.3245 181.952 57.6381C181.952 54.6573 183.035 52.4493 185.201 51.0141C187.368 49.5789 190.544 48.8613 194.73 48.8613H199.301V47.4261C199.301 45.7333 198.897 44.4637 198.09 43.6173C197.319 42.7341 195.997 42.2925 194.124 42.2925C192.398 42.2925 191.003 42.6237 189.938 43.2861C188.873 43.9485 187.955 44.8133 187.184 45.8805L182.723 41.9061C183.678 40.2869 185.165 38.9621 187.184 37.9317C189.241 36.8645 191.866 36.3309 195.06 36.3309C198.953 36.3309 201.982 37.2325 204.148 39.0357C206.351 40.8021 207.453 43.4885 207.453 47.0949V59.5701H210.592V65.4765H205.911ZM194.179 60.7845C195.611 60.7845 196.823 60.4349 197.814 59.7357C198.806 59.0365 199.301 58.0245 199.301 56.6997V53.2773H194.95C191.609 53.2773 189.938 54.3997 189.938 56.6445V57.7485C189.938 58.7421 190.324 59.4965 191.095 60.0117C191.866 60.5269 192.894 60.7845 194.179 60.7845Z"
                        fill="#08103B" />
                    <path
                        d="M149.808 59.1284H158.51V30.9764H149.808V24.6284H166.662V59.1284H175.364V65.4764H149.808V59.1284Z"
                        fill="#08103B" />
                    <path
                        d="M128.955 66.1388C125.724 66.1388 122.915 65.6052 120.528 64.538C118.142 63.4708 116.214 62.0172 114.745 60.1772L119.537 54.878C120.932 56.4236 122.456 57.5644 124.108 58.3004C125.797 59.0364 127.505 59.4044 129.231 59.4044C131.213 59.4044 132.719 58.9628 133.747 58.0796C134.775 57.1964 135.289 55.9268 135.289 54.2708C135.289 52.9092 134.885 51.8788 134.077 51.1796C133.306 50.4804 131.985 49.9836 130.112 49.6892L126.091 49.0268C122.64 48.438 120.143 47.1684 118.601 45.218C117.058 43.2308 116.287 40.8204 116.287 37.9868C116.287 34.27 117.499 31.3996 119.923 29.3756C122.346 27.3148 125.742 26.2844 130.112 26.2844C133.086 26.2844 135.675 26.7444 137.878 27.6644C140.081 28.5844 141.862 29.8356 143.22 31.418L138.539 36.662C137.511 35.5212 136.299 34.638 134.904 34.0124C133.508 33.35 131.929 33.0188 130.167 33.0188C126.458 33.0188 124.604 34.546 124.604 37.6004C124.604 38.9252 125.008 39.9188 125.816 40.5812C126.66 41.2436 128.019 41.7404 129.892 42.0716L133.912 42.7892C137.033 43.3412 139.438 44.5188 141.127 46.322C142.816 48.1252 143.661 50.554 143.661 53.6084C143.661 55.4116 143.349 57.086 142.725 58.6316C142.1 60.1404 141.164 61.4652 139.916 62.606C138.667 63.71 137.125 64.5748 135.289 65.2004C133.49 65.826 131.379 66.1388 128.955 66.1388Z"
                        fill="#08103B" />
                    <defs>
                        <linearGradient id="paint0_linear_5_98" x1="66.125" y1="41.3773" x2="66.125" y2="90.8727"
                            gradientUnits="userSpaceOnUse">
                            <stop stop-color="#D54BF6" />
                            <stop offset="1" stop-color="#4B10D1" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>

            <div class="sidebar-nav">
                <div class="sidebar-item active" data-tab="foundations" onclick="switchTab(this)" title="Foundations">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/>
                        <circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/>
                        <circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/>
                        <circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/>
                        <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/>
                    </svg>
                </div>
                <div class="sidebar-item" data-tab="components" onclick="switchTab(this)" title="Components">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                    </svg>
                </div>
                <div class="sidebar-item" data-tab="typography" onclick="switchTab(this)" title="Typography">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="4 7 4 4 20 4 20 7"/>
                        <line x1="9" y1="20" x2="15" y2="20"/>
                        <line x1="12" y1="4" x2="12" y2="20"/>
                    </svg>
                </div>
                <div class="sidebar-item" data-tab="icons" onclick="switchTab(this)" title="Icons">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                        <line x1="9" y1="9" x2="9.01" y2="9"/>
                        <line x1="15" y1="9" x2="15.01" y2="9"/>
                    </svg>
                </div>
                <div class="sidebar-item" data-tab="export" onclick="switchTab(this)" title="Export">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                </div>
            </div>

            <div class="sidebar-divider"></div>

            <div class="sidebar-actions">
                <div class="sidebar-item" onclick="resetDefaults()" title="Reset">

                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Main Area -->
        <div class="main-area">
            <!-- Top Header -->
            <div class="top-header">
                <div class="header-title" id="headerTitle">Foundations</div>
            </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Content Wrapper -->
            <div class="content-wrapper">
                <div class="content">
                    <!-- Foundations Tab -->
                    <div class="tab-content active" id="foundations">
                        <div style="max-width: 1200px; width: 100%;">
                            <!-- Primary Color -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">
                                        Primary Color
                                    </div>
                                    <div class="card-header-right">
                                        <div style="display: flex; align-items: center; gap: 8px;"
                                            onclick="event.stopPropagation()">
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: var(--text-secondary);">Shades</span>
                                            <select id="primaryShadeCount"
                                                onchange="generatePrimaryShades(document.getElementById('primaryColor').value)"
                                                style="padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; font-size: 11px; cursor: pointer;">
                                                <option value="5">5</option>
                                                <option value="10">10</option>
                                                <option value="11" selected>11</option>
                                                <option value="15">15</option>
                                                <option value="20">20</option>
                                                <option value="25">25</option>
                                                <option value="30">30</option>
                                                <option value="35">35</option>
                                            </select>
                                        </div>
                                        <input type="color" id="primaryColor" value="#0066FF"
                                            onchange="generatePrimaryShades(this.value)"
                                            onclick="event.stopPropagation()"
                                            style="width: 32px; height: 32px; border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer;">
                                        <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div style="margin-bottom: 16px;">
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">
                                            Light Mode</div>
                                        <div id="primaryShades" class="color-shades-grid"></div>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">
                                            Dark Mode</div>
                                        <div id="primaryShadesDark" class="color-shades-grid"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Secondary Color (Optional) -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">
                                        Secondary Color (Optional)
                                    </div>
                                    <div class="card-header-right">
                                        <label class="toggle-switch" onclick="event.stopPropagation()">
                                            <input type="checkbox" id="secondaryToggle"
                                                onchange="toggleSecondary(this.checked)">
                                            <span class="toggle-slider"></span>
                                        </label>
                                        <div style="display: flex; align-items: center; gap: 8px;"
                                            onclick="event.stopPropagation()">
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: var(--text-secondary);">Shades</span>
                                            <select id="secondaryShadeCount"
                                                onchange="generateSecondaryShades(document.getElementById('secondaryColor').value)"
                                                style="padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; font-size: 11px; cursor: pointer;"
                                                disabled>
                                                <option value="5">5</option>
                                                <option value="10">10</option>
                                                <option value="11" selected>11</option>
                                                <option value="15">15</option>
                                                <option value="20">20</option>
                                                <option value="25">25</option>
                                                <option value="30">30</option>
                                                <option value="35">35</option>
                                            </select>
                                        </div>
                                        <input type="color" id="secondaryColor" value="#8b5cf6"
                                            onchange="generateSecondaryShades(this.value)"
                                            onclick="event.stopPropagation()"
                                            style="width: 32px; height: 32px; border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer; opacity: 0.3;"
                                            disabled>
                                        <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-body" style="display: none;">
                                    <div style="margin-bottom: 16px;">
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">
                                            Light Mode</div>
                                        <div id="secondaryShades" class="color-shades-grid"></div>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">
                                            Dark Mode</div>
                                        <div id="secondaryShadesDark" class="color-shades-grid"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Status Colors -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">Status Colors</div>
                                    <div class="card-header-right">
                                        <div style="display: flex; align-items: center; gap: 8px;"
                                            onclick="event.stopPropagation()">
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: var(--text-secondary);">Shades</span>
                                            <select id="statusShadeCount" onchange="regenerateAllStatusShades()"
                                                style="padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; font-size: 11px; cursor: pointer;">
                                                <option value="3" selected>3</option>
                                                <option value="5">5</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="15">15</option>
                                                <option value="20">20</option>
                                            </select>
                                        </div>
                                        <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div style="display: grid; gap: 16px;">
                                        <!-- Success -->
                                        <div>
                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                                                <span
                                                    style="font-size: 12px; font-weight: 500; color: var(--text-primary);">Success
                                                    (Green)</span>
                                                <input type="color" id="successColor" value="#00C853"
                                                    onchange="generateSuccessShades(this.value)"
                                                    style="width: 32px; height: 32px; border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer;">
                                            </div>
                                            <div id="successShades" class="color-shades-grid-small"></div>
                                        </div>

                                        <!-- Error -->
                                        <div>
                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                                                <span
                                                    style="font-size: 12px; font-weight: 500; color: var(--text-primary);">Error
                                                    (Red)</span>
                                                <input type="color" id="errorColor" value="#FF3B30"
                                                    onchange="generateErrorShades(this.value)"
                                                    style="width: 32px; height: 32px; border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer;">
                                            </div>
                                            <div id="errorShades" class="color-shades-grid-small"></div>
                                        </div>

                                        <!-- Warning -->
                                        <div>
                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                                                <span
                                                    style="font-size: 12px; font-weight: 500; color: var(--text-primary);">Warning
                                                    (Orange)</span>
                                                <input type="color" id="warningColor" value="#FF9500"
                                                    onchange="generateWarningShades(this.value)"
                                                    style="width: 32px; height: 32px; border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer;">
                                            </div>
                                            <div id="warningShades" class="color-shades-grid-small"></div>
                                        </div>

                                        <!-- Info -->
                                        <div>
                                            <div
                                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                                                <span
                                                    style="font-size: 12px; font-weight: 500; color: var(--text-primary);">Info
                                                    (Blue)</span>
                                                <input type="color" id="infoColor" value="#2196F3"
                                                    onchange="generateInfoShades(this.value)"
                                                    style="width: 32px; height: 32px; border: 1px solid var(--border); border-radius: var(--radius-sm); cursor: pointer;">
                                            </div>
                                            <div id="infoShades" class="color-shades-grid-small"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Neutral Colors -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">Neutral Colors</div>
                                    <div class="card-header-right">
                                        <div style="display: flex; align-items: center; gap: 8px;"
                                            onclick="event.stopPropagation()">
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: var(--text-secondary);">Shades</span>
                                            <select id="neutralShadeCount" onchange="generateNeutralShades()"
                                                style="padding: 4px 8px; border: 1px solid var(--border); border-radius: 4px; font-size: 11px; cursor: pointer;">
                                                <option value="5">5</option>
                                                <option value="10">10</option>
                                                <option value="11" selected>11</option>
                                                <option value="15">15</option>
                                                <option value="20">20</option>
                                                <option value="25">25</option>
                                                <option value="30">30</option>
                                                <option value="35">35</option>
                                            </select>
                                        </div>
                                        <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div style="margin-bottom: 16px;">
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">
                                            Light Mode</div>
                                        <div id="neutralShades" class="color-shades-grid"></div>
                                    </div>
                                    <div>
                                        <div
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px;">
                                            Dark Mode</div>
                                        <div id="neutralShadesDark" class="color-shades-grid"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Spacing Tokens -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">Spacing Tokens</div>
                                    <div class="card-header-right">
                                        <div style="display: flex; align-items: center; gap: 6px;"
                                            onclick="event.stopPropagation()">
                                            <span
                                                style="font-size: 10px; font-weight: 500; color: var(--text-secondary);">Base</span>
                                            <input type="number" id="spacingBaseUnit" value="4" min="1" max="16"
                                                onchange="generateSpacingTokens()"
                                                style="width: 45px; padding: 3px 6px; border: 1px solid var(--border); border-radius: 4px; font-size: 11px; text-align: center;">
                                            <span style="font-size: 10px; color: var(--text-muted);">px</span>
                                        </div>
                                        <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="spacingPreview" class="spacing-list"></div>
                                </div>
                            </div>

                            <!-- Radius Tokens -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">Radius Tokens</div>
                                    <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="card-body">
                                    <div id="radiusPreview" class="spacing-list"></div>
                                </div>
                            </div>

                            <!-- Shadow Tokens -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">Shadow Tokens</div>
                                    <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="card-body">
                                    <div id="shadowPreview" class="spacing-list"></div>
                                </div>
                            </div>

                            <!-- Stroke Tokens -->
                            <div class="card collapsed">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">Stroke Tokens</div>
                                    <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="card-body">
                                    <div id="strokePreview" class="spacing-list"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Create Variables Button -->
                        <div style="margin-top: 32px; display: flex; justify-content: center;">
                            <button class="btn btn-primary" id="create-variable-btn" style="padding: 12px 32px; font-size: 14px;">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                                Create Variables
                            </button>
                        </div>
                    </div>
                    <!-- Components Tab -->
                    <div class="tab-content" id="components">
                        <div style="max-width: 1200px; width: 100%;">
                            <!-- Button Component -->
                            <div class="card">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="3" y="8" width="18" height="8" rx="2" />
                                        </svg>
                                        Button Component
                                    </div>
                                    <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="card-body">
                                    <p style="font-size: 12px; color: var(--text-secondary); margin-bottom: 20px;">
                                        Create a button component set with states (Default, Hover, Click, Disabled) and
                                        icon options.
                                    </p>

                                    <!-- Button Text -->
                                    <div style="margin-bottom: 16px;">
                                        <label
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block;">Button
                                            Text</label>
                                        <input type="text" id="buttonText" value="Button"
                                            placeholder="Enter button text"
                                            style="width: 100%; padding: 10px 12px; background: #0A0A0A; color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; font-size: 13px; transition: border-color 0.2s;"
                                            onfocus="this.style.borderColor='var(--primary)'"
                                            onblur="this.style.borderColor='var(--border)'">
                                    </div>

                                    <!-- Colors Grid -->
                                    <div
                                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                        <!-- Background Color -->
                                        <div>
                                            <label
                                                style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block;">Background
                                                Color</label>
                                            <div style="display: flex; align-items: stretch; gap: 8px; height: 44px;">
                                                <input type="color" id="buttonBgColor" value="#0066FF"
                                                    onchange="document.getElementById('buttonBgColorHex').value = this.value.toUpperCase()"
                                                    style="width: 44px; height: 44px; border: 1px solid var(--border); border-radius: 6px; cursor: pointer; padding: 2px;">
                                                <input type="text" id="buttonBgColorHex" value="#0066FF" maxlength="7"
                                                    oninput="if(/^#[0-9A-F]{6}$/i.test(this.value)) document.getElementById('buttonBgColor').value = this.value"
                                                    style="flex: 1; padding: 0 12px; background: #0A0A0A; color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; font-size: 12px; font-family: 'Monaco', monospace; text-transform: uppercase; font-weight: 500;">
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div>
                                            <label
                                                style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block;">Text
                                                Color</label>
                                            <div style="display: flex; align-items: stretch; gap: 8px; height: 44px;">
                                                <input type="color" id="buttonTextColor" value="#ffffff"
                                                    onchange="document.getElementById('buttonTextColorHex').value = this.value.toUpperCase()"
                                                    style="width: 44px; height: 44px; border: 1px solid var(--border); border-radius: 6px; cursor: pointer; padding: 2px;">
                                                <input type="text" id="buttonTextColorHex" value="#FFFFFF" maxlength="7"
                                                    oninput="if(/^#[0-9A-F]{6}$/i.test(this.value)) document.getElementById('buttonTextColor').value = this.value"
                                                    style="flex: 1; padding: 0 12px; background: #0A0A0A; color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; font-size: 12px; font-family: 'Monaco', monospace; text-transform: uppercase; font-weight: 500;">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Border Radius -->
                                    <div style="margin-bottom: 20px;">
                                        <label
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: flex; align-items: center; justify-content: space-between;">
                                            <span>Border Radius</span>
                                            <span id="radiusValue"
                                                style="font-size: 11px; color: var(--text-secondary); font-weight: 500;">8px</span>
                                        </label>
                                        <input type="range" id="buttonRadius" value="8" min="0" max="50" step="1"
                                            oninput="document.getElementById('radiusValue').textContent = this.value + 'px'; updateRangeSlider(this)"
                                            style="width: 100%; height: 6px; border-radius: 3px; background: linear-gradient(to right, var(--primary) 0%, var(--primary) 16%, var(--border) 16%, var(--border) 100%); outline: none; -webkit-appearance: none; appearance: none; cursor: pointer;">
                                    </div>

                                    <!-- Icon Options -->
                                    <div
                                        style="background: var(--bg-secondary); padding: 14px; border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--border-light);">
                                        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 10px;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                style="color: var(--primary);">
                                                <circle cx="12" cy="12" r="10" />
                                                <path d="M12 16v-4" />
                                                <path d="M12 8h.01" />
                                            </svg>
                                            <span
                                                style="font-size: 11px; font-weight: 600; color: var(--text-primary);">Icon
                                                Options</span>
                                        </div>
                                        <p
                                            style="font-size: 11px; color: var(--text-secondary); margin-bottom: 10px; line-height: 1.5;">
                                            Boolean properties for left and right icons will be added. Toggle them in
                                            Figma's properties panel.
                                        </p>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                            <div
                                                style="background: var(--bg-card); padding: 10px; border-radius: 6px; border: 1px solid var(--border); display: flex; align-items: center; gap: 6px;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    style="color: var(--success);">
                                                    <polyline points="20 6 9 17 4 12" />
                                                </svg>
                                                <span
                                                    style="font-size: 11px; font-weight: 500; color: var(--text-primary);">Left
                                                    Icon</span>
                                            </div>
                                            <div
                                                style="background: var(--bg-card); padding: 10px; border-radius: 6px; border: 1px solid var(--border); display: flex; align-items: center; gap: 6px;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    style="color: var(--success);">
                                                    <polyline points="20 6 9 17 4 12" />
                                                </svg>
                                                <span
                                                    style="font-size: 11px; font-weight: 500; color: var(--text-primary);">Right
                                                    Icon</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Create Button -->
                                    <button class="btn btn-primary" onclick="createButtonComponent()"
                                        style="width: 100%; padding: 12px; font-size: 13px; font-weight: 600;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
                                            <path
                                                d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                                        </svg>
                                        Create Button Component Set
                                    </button>
                                </div>
                            </div>

                            <!-- Input Component -->
                            <div class="card">
                                <div class="card-header" onclick="toggleCard(this)">
                                    <div class="card-title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <rect x="2" y="6" width="20" height="12" rx="2" />
                                            <path d="M6 10h.01" />
                                        </svg>
                                        Input Component
                                    </div>
                                    <svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="card-body">
                                    <p style="font-size: 12px; color: var(--text-secondary); margin-bottom: 20px;">
                                        Create an input component set with 3 types (Text, Textarea, OTP) and 5 states
                                        (Default, Click, Error, Success, Disabled). Text/Textarea are 324px wide with
                                        left-aligned text. Click state uses Primary Color. OTP has a 6-Digit boolean
                                        property. Includes label and icon options.
                                    </p>

                                    <!-- Input Placeholder -->
                                    <div style="margin-bottom: 16px;">
                                        <label
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block;">Placeholder
                                            Text</label>
                                        <input type="text" id="inputPlaceholder" value="Enter text..."
                                            placeholder="Enter placeholder text"
                                            style="width: 100%; padding: 10px 12px; background: #0A0A0A; color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; font-size: 13px; transition: border-color 0.2s;"
                                            onfocus="this.style.borderColor='var(--primary)'"
                                            onblur="this.style.borderColor='var(--border)'">
                                    </div>

                                    <!-- Colors Grid -->
                                    <div
                                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                                        <!-- Border Color -->
                                        <div>
                                            <label
                                                style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block;">Border
                                                Color</label>
                                            <div style="display: flex; align-items: stretch; gap: 8px; height: 44px;">
                                                <input type="color" id="inputBorderColor" value="#d1d5db"
                                                    onchange="document.getElementById('inputBorderColorHex').value = this.value.toUpperCase()"
                                                    style="width: 44px; height: 44px; border: 1px solid var(--border); border-radius: 6px; cursor: pointer; padding: 2px;">
                                                <input type="text" id="inputBorderColorHex" value="#D1D5DB"
                                                    maxlength="7"
                                                    oninput="if(/^#[0-9A-F]{6}$/i.test(this.value)) document.getElementById('inputBorderColor').value = this.value"
                                                    style="flex: 1; padding: 0 12px; background: #0A0A0A; color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; font-size: 12px; font-family: 'Monaco', monospace; text-transform: uppercase; font-weight: 500;">
                                            </div>
                                        </div>

                                        <!-- Text Color -->
                                        <div>
                                            <label
                                                style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: block;">Text
                                                Color</label>
                                            <div style="display: flex; align-items: stretch; gap: 8px; height: 44px;">
                                                <input type="color" id="inputTextColor" value="#1a1a1a"
                                                    onchange="document.getElementById('inputTextColorHex').value = this.value.toUpperCase()"
                                                    style="width: 44px; height: 44px; border: 1px solid var(--border); border-radius: 6px; cursor: pointer; padding: 2px;">
                                                <input type="text" id="inputTextColorHex" value="#1A1A1A" maxlength="7"
                                                    oninput="if(/^#[0-9A-F]{6}$/i.test(this.value)) document.getElementById('inputTextColor').value = this.value"
                                                    style="flex: 1; padding: 0 12px; background: #0A0A0A; color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; font-size: 12px; font-family: 'Monaco', monospace; text-transform: uppercase; font-weight: 500;">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Primary Color Info -->
                                    <div
                                        style="background: var(--primary-light); padding: 12px; border-radius: 8px; margin-bottom: 16px; border: 1px solid var(--primary); border-left-width: 3px;">
                                        <p style="font-size: 11px; color: var(--text-primary); line-height: 1.5;">
                                            <strong> Tip:</strong> The Click state automatically uses the Primary
                                            Color from the Foundations tab.
                                        </p>
                                    </div>

                                    <!-- Border Radius -->
                                    <div style="margin-bottom: 20px;">
                                        <label
                                            style="font-size: 11px; font-weight: 600; color: var(--text-primary); margin-bottom: 6px; display: flex; align-items: center; justify-content: space-between;">
                                            <span>Border Radius</span>
                                            <span id="inputRadiusValue"
                                                style="font-size: 11px; color: var(--text-secondary); font-weight: 500;">6px</span>
                                        </label>
                                        <input type="range" id="inputRadius" value="6" min="0" max="50" step="1"
                                            oninput="document.getElementById('inputRadiusValue').textContent = this.value + 'px'; updateRangeSlider(this)"
                                            style="width: 100%; height: 6px; border-radius: 3px; background: linear-gradient(to right, var(--primary) 0%, var(--primary) 12%, var(--border) 12%, var(--border) 100%); outline: none; -webkit-appearance: none; appearance: none; cursor: pointer;">
                                    </div>

                                    <!-- Icon Options -->
                                    <div
                                        style="background: var(--bg-secondary); padding: 14px; border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--border-light);">
                                        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 10px;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                style="color: var(--primary);">
                                                <circle cx="12" cy="12" r="10" />
                                                <path d="M12 16v-4" />
                                                <path d="M12 8h.01" />
                                            </svg>
                                            <span
                                                style="font-size: 11px; font-weight: 600; color: var(--text-primary);">Component
                                                Features</span>
                                        </div>
                                        <p
                                            style="font-size: 11px; color: var(--text-secondary); margin-bottom: 10px; line-height: 1.5;">
                                            Boolean properties for label and icons will be added. Toggle them in Figma's
                                            properties panel.
                                        </p>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
                                            <div
                                                style="background: var(--bg-card); padding: 10px; border-radius: 6px; border: 1px solid var(--border); display: flex; align-items: center; gap: 6px;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    style="color: var(--success);">
                                                    <polyline points="20 6 9 17 4 12" />
                                                </svg>
                                                <span
                                                    style="font-size: 11px; font-weight: 500; color: var(--text-primary);">Label</span>
                                            </div>
                                            <div
                                                style="background: var(--bg-card); padding: 10px; border-radius: 6px; border: 1px solid var(--border); display: flex; align-items: center; gap: 6px;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    style="color: var(--success);">
                                                    <polyline points="20 6 9 17 4 12" />
                                                </svg>
                                                <span
                                                    style="font-size: 11px; font-weight: 500; color: var(--text-primary);">Left
                                                    Icon</span>
                                            </div>
                                            <div
                                                style="background: var(--bg-card); padding: 10px; border-radius: 6px; border: 1px solid var(--border); display: flex; align-items: center; gap: 6px;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    style="color: var(--success);">
                                                    <polyline points="20 6 9 17 4 12" />
                                                </svg>
                                                <span
                                                    style="font-size: 11px; font-weight: 500; color: var(--text-primary);">Right
                                                    Icon</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Create Input -->
                                    <button class="btn btn-primary" onclick="createInputComponent()"
                                        style="width: 100%; padding: 12px; font-size: 13px; font-weight: 600;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
                                            <path
                                                d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                                        </svg>
                                        Create Input Component Set
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Typography Tab -->
                    <div class="tab-content" id="typography">
                        <div id="typography-content"></div>
                    </div>

                    <!-- Icons Tab -->
                    <div class="tab-content" id="icons">
                        <div id="iconLibraryContent"></div>
                    </div>

                    <!-- Export Tab -->
                    <div class="tab-content" id="export">
                        <div class="empty-state">
                            <div class="empty-state-icon"></div>
                            <div class="empty-state-title">Export</div>
                            <div class="empty-state-description">Generate and download your design system JSON</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Welcome Screen Functions
        function startApp() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('appContainer').classList.remove('hidden');
            
            // Initialize the app
            initializeApp();
        }

        function learnMore() {
            // You can add a link to documentation or show a help modal
            alert('Design System Maker helps you create consistent design tokens for your Figma projects. Use the tabs to configure colors, typography, spacing, and more!');
        }

        function initializeApp() {
            // Initialize all the default values and UI
            generatePrimaryShades(document.getElementById('primaryColor').value);
            generateSecondaryShades(document.getElementById('secondaryColor').value);
            generateNeutralShades(); // No parameter needed
            generateSuccessShades(document.getElementById('successColor').value);
            generateWarningShades(document.getElementById('warningColor').value);
            generateErrorShades(document.getElementById('errorColor').value);
            generateInfoShades(document.getElementById('infoColor').value);
            generateSpacingTokens();
            generateRadiusTokens();
            generateShadowTokens();
            generateStrokeTokens();
            syncColorPickers();

            // Initialize range sliders
            const radiusSlider = document.getElementById('buttonRadius');
            if (radiusSlider) {
                updateRangeSlider(radiusSlider);
            }

            const inputRadiusSlider = document.getElementById('inputRadius');
            if (inputRadiusSlider) {
                updateRangeSlider(inputRadiusSlider);
            }

            // Initialize typography
            if (typeof initializeTypography === 'function') {
                initializeTypography();
            }
        }

        // Color shade generation utilities
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function generateShades(baseColor, count) {
            const rgb = hexToRgb(baseColor);
            if (!rgb) return [];

            const shades = [];
            // For 11 shades, position 5 (index 5) will be the base color (500 shade)
            // For other counts, adjust the base index proportionally
            const baseIndex = Math.floor(count / 2);

            for (let i = 0; i < count; i++) {
                if (i === baseIndex) {
                    // This is the base color
                    shades.push(baseColor);
                } else if (i < baseIndex) {
                    // Lighter shades
                    // Interpolate between white and base color
                    const factor = (baseIndex - i) / baseIndex;
                    const r = Math.round(rgb.r + (255 - rgb.r) * factor);
                    const g = Math.round(rgb.g + (255 - rgb.g) * factor);
                    const b = Math.round(rgb.b + (255 - rgb.b) * factor);
                    shades.push(rgbToHex(r, g, b));
                } else {
                    // Darker shades
                    // Interpolate between base color and black
                    const factor = (i - baseIndex) / (count - 1 - baseIndex);
                    const r = Math.round(rgb.r * (1 - factor));
                    const g = Math.round(rgb.g * (1 - factor));
                    const b = Math.round(rgb.b * (1 - factor));
                    shades.push(rgbToHex(r, g, b));
                }
            }
            return shades;
        }

        function getContrastColor(hexColor) {
            const rgb = hexToRgb(hexColor);
            if (!rgb) return '#000000';
            const brightness = (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;
            return brightness > 128 ? '#000000' : '#ffffff';
        }

        function renderColorShades(shades, prefix, container) {
            let html = '';
            // Generate shade numbers dynamically based on count
            const count = shades.length;
            let shadeNumbers;

            if (count === 11) {
                shadeNumbers = [50, 100, 200, 300, 400, 500, 600, 700, 800, 900, 950];
            } else if (count === 5) {
                shadeNumbers = [100, 300, 500, 700, 900];
            } else if (count === 10) {
                shadeNumbers = [50, 100, 200, 300, 400, 500, 600, 700, 800, 900];
            } else if (count === 15) {
                shadeNumbers = [25, 50, 100, 150, 200, 300, 400, 500, 600, 700, 800, 850, 900, 925, 950];
            } else if (count === 20) {
                shadeNumbers = Array.from({ length: 20 }, (_, i) => (i + 1) * 50);
            } else if (count === 25) {
                shadeNumbers = Array.from({ length: 25 }, (_, i) => (i + 1) * 40);
            } else if (count === 30) {
                shadeNumbers = Array.from({ length: 30 }, (_, i) => Math.round((i + 1) * 33.33));
            } else if (count === 35) {
                shadeNumbers = Array.from({ length: 35 }, (_, i) => Math.round((i + 1) * 28.57));
            } else {
                // Default: generate sequential numbers
                shadeNumbers = Array.from({ length: count }, (_, i) => (i + 1) * Math.floor(1000 / count));
            }

            shades.forEach((color, index) => {
                const shadeName = `${prefix}-${shadeNumbers[index]}`;
                html += `
          <div class="color-swatch" onclick="copyToClipboard('${color}')" title="Click to copy ${color}">
            <div class="color-swatch-preview" style="background: ${color};"></div>
            <div class="color-swatch-name">${shadeName}</div>
            <div class="color-swatch-value">${color.toUpperCase()}</div>
          </div>
        `;
            });
            document.getElementById(container).innerHTML = html;
        }

        function renderSmallShades(shades, prefix, container) {
            let html = '';
            const count = shades.length;
            let labels;

            if (count === 3) {
                labels = ['light', 'default', 'dark'];
            } else if (count === 5) {
                labels = ['lighter', 'light', 'default', 'dark', 'darker'];
            } else if (count === 10) {
                labels = [50, 100, 200, 300, 400, 500, 600, 700, 800, 900];
            } else if (count === 11) {
                labels = [50, 100, 200, 300, 400, 500, 600, 700, 800, 900, 950];
            } else if (count === 15) {
                labels = [25, 50, 100, 150, 200, 300, 400, 500, 600, 700, 800, 850, 900, 925, 950];
            } else if (count === 20) {
                labels = Array.from({ length: 20 }, (_, i) => (i + 1) * 50);
            } else {
                // Default: generate sequential numbers
                labels = Array.from({ length: count }, (_, i) => (i + 1) * Math.floor(1000 / count));
            }

            shades.forEach((color, index) => {
                const shadeName = `${prefix}-${labels[index]}`;
                html += `
          <div class="color-swatch" onclick="copyToClipboard('${color}')" title="Click to copy ${color}">
            <div class="color-swatch-preview" style="background: ${color};"></div>
            <div class="color-swatch-name">${shadeName}</div>
            <div class="color-swatch-value">${color.toUpperCase()}</div>
          </div>
        `;
            });
            document.getElementById(container).innerHTML = html;
        }

        // Generate primary shades
        function generatePrimaryShades(color) {
            const count = parseInt(document.getElementById('primaryShadeCount').value);
            const shades = generateShades(color, count);
            renderColorShades(shades, 'primary', 'primaryShades');

            // Generate dark mode shades (reversed)
            const darkShades = [...shades].reverse();
            renderColorShades(darkShades, 'primary', 'primaryShadesDark');

            // Auto-sync button background color with primary color
            const buttonBgColor = document.getElementById('buttonBgColor');
            const buttonBgColorHex = document.getElementById('buttonBgColorHex');
            if (buttonBgColor && buttonBgColorHex) {
                buttonBgColor.value = color;
                buttonBgColorHex.value = color.toUpperCase();
            }
        }

        // Generate secondary shades
        function generateSecondaryShades(color) {
            const count = parseInt(document.getElementById('secondaryShadeCount').value);
            const shades = generateShades(color, count);
            renderColorShades(shades, 'secondary', 'secondaryShades');

            // Generate dark mode shades (reversed)
            const darkShades = [...shades].reverse();
            renderColorShades(darkShades, 'secondary', 'secondaryShadesDark');
        }

        // Toggle secondary color
        function toggleSecondary(enabled) {
            const colorInput = document.getElementById('secondaryColor');
            const shadeCountSelect = document.getElementById('secondaryShadeCount');
            const shadesContainer = document.getElementById('secondaryShades');
            const cardBody = shadesContainer.closest('.card-body');

            if (enabled) {
                colorInput.disabled = false;
                colorInput.style.opacity = '1';
                shadeCountSelect.disabled = false;
                shadesContainer.style.display = 'grid';
                if (cardBody) cardBody.style.display = 'block';
                generateSecondaryShades(colorInput.value);
            } else {
                colorInput.disabled = true;
                colorInput.style.opacity = '0.3';
                shadeCountSelect.disabled = true;
                shadesContainer.style.display = 'none';
                // Hide the card body if secondary is disabled
                if (cardBody) cardBody.style.display = 'none';
            }
        }

        // Generate status color shades with dynamic count
        function generateStatusShades(color, prefix, container) {
            const count = parseInt(document.getElementById('statusShadeCount').value);
            const rgb = hexToRgb(color);
            let shades;

            if (count === 3) {
                // Original 3-shade logic
                shades = [
                    rgbToHex(
                        Math.min(255, rgb.r + 60),
                        Math.min(255, rgb.g + 60),
                        Math.min(255, rgb.b + 60)
                    ),
                    color,
                    rgbToHex(
                        Math.max(0, rgb.r - 40),
                        Math.max(0, rgb.g - 40),
                        Math.max(0, rgb.b - 40)
                    )
                ];
            } else {
                // Use the standard shade generation for other counts
                shades = generateShades(color, count);
            }

            renderSmallShades(shades, prefix, container);
        }

        function generateSuccessShades(color) {
            generateStatusShades(color, 'success', 'successShades');
        }

        function generateErrorShades(color) {
            generateStatusShades(color, 'error', 'errorShades');
        }

        function generateWarningShades(color) {
            generateStatusShades(color, 'warning', 'warningShades');
        }

        function generateInfoShades(color) {
            generateStatusShades(color, 'info', 'infoShades');
        }

        // Regenerate all status shades when count changes
        function regenerateAllStatusShades() {
            const successColor = document.getElementById('successColor').value;
            const errorColor = document.getElementById('errorColor').value;
            const warningColor = document.getElementById('warningColor').value;
            const infoColor = document.getElementById('infoColor').value;

            generateSuccessShades(successColor);
            generateErrorShades(errorColor);
            generateWarningShades(warningColor);
            generateInfoShades(infoColor);
        }

        // Generate neutral shades
        function generateNeutralShades() {
            const shadeCount = parseInt(document.getElementById('neutralShadeCount').value);
            const shades = [];
            for (let i = 0; i < shadeCount; i++) {
                const value = Math.round(255 - (255 * i / (shadeCount - 1)));
                shades.push(rgbToHex(value, value, value));
            }
            renderColorShades(shades, 'neutral', 'neutralShades');

            // Generate dark mode shades (reversed)
            const darkShades = [...shades].reverse();
            renderColorShades(darkShades, 'neutral', 'neutralShadesDark');
        }

        // Copy to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Could add a toast notification here
                console.log('Copied:', text);
            });
        }

        // Navigation
        function switchTab(tab) {
            document.querySelectorAll('.sidebar-item').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById(tab.dataset.tab).classList.add('active');

            // Update header title
            const titles = {
                'foundations': 'Foundations',
                'components': 'Components',
                'typography': 'Typography',
                'icons': 'Icon Library',
                'export': 'Export'
            };
            const headerTitle = document.getElementById('headerTitle');
            if (headerTitle) {
                headerTitle.textContent = titles[tab.dataset.tab] || 'Design System Maker';
            }

            // Initialize icon library when switching to icons tab
            if (tab.dataset.tab === 'icons') {
                if (typeof initIconLibrary === 'function') {
                    initIconLibrary();
                }
            }
        }

        function resetDefaults() {
            if (confirm('Reset all settings to defaults?')) {
                location.reload();
            }
        }

        // Toggle card collapse/expand
        function toggleCard(header) {
            const card = header.closest('.card');
            card.classList.toggle('collapsed');
        }

        // Event Listeners
        document.getElementById('create-variable-btn').addEventListener('click', () => {
            console.log('Create Variable button clicked');

            // Collect all color data (both light and dark modes)
            const colorData = {
                primary: {
                    light: collectColorShades('primary'),
                    dark: collectColorShades('primaryDark', 'primaryShadesDark')
                },
                secondary: document.getElementById('secondaryToggle').checked ? {
                    light: collectColorShades('secondary'),
                    dark: collectColorShades('secondaryDark', 'secondaryShadesDark')
                } : null,
                success: collectStatusColors('success'),
                error: collectStatusColors('error'),
                warning: collectStatusColors('warning'),
                info: collectStatusColors('info'),
                neutral: {
                    light: collectColorShades('neutral'),
                    dark: collectColorShades('neutralDark', 'neutralShadesDark')
                }
            };

            // Collect spacing data
            const spacingData = collectSpacingTokens();

            // Collect radius data
            const radiusData = collectRadiusTokens();

            // Collect shadow data
            const shadowData = collectShadowTokens();

            // Collect stroke data
            const strokeData = collectStrokeTokens();

            console.log('Collected color data:', colorData);
            console.log('Collected spacing data:', spacingData);
            console.log('Collected radius data:', radiusData);
            console.log('Collected shadow data:', shadowData);
            console.log('Collected stroke data:', strokeData);

            // Send message to plugin code to create variables
            parent.postMessage({
                pluginMessage: {
                    type: 'create-variables',
                    colors: colorData,
                    spacing: spacingData,
                    radius: radiusData,
                    shadows: shadowData,
                    strokes: strokeData
                }
            }, '*');

            console.log('Message sent to plugin');
        });

        // Helper function to collect color shades from the UI
        function collectColorShades(prefix, containerId) {
            // If containerId is provided, use it; otherwise construct from prefix
            const containerIdToUse = containerId || `${prefix}Shades`;
            console.log(`Collecting colors for: ${prefix} from container: ${containerIdToUse}`);
            const container = document.getElementById(containerIdToUse);

            if (!container) {
                console.warn(`Container not found for: ${containerIdToUse}`);
                return null;
            }

            console.log(`Container found for ${prefix}, looking for swatches...`);
            const swatches = container.querySelectorAll('.color-swatch');
            console.log(`Found ${swatches.length} swatches for ${prefix}`);

            const colors = {};

            swatches.forEach((swatch, index) => {
                const nameEl = swatch.querySelector('.color-swatch-name');
                const valueEl = swatch.querySelector('.color-swatch-value');

                const name = nameEl?.textContent?.trim();
                const value = valueEl?.textContent?.trim();

                console.log(`Swatch ${index}: name="${name}", value="${value}"`);

                if (name && value) {
                    colors[name] = value;
                }
            });

            console.log(`Collected ${Object.keys(colors).length} colors for ${prefix}:`, colors);
            return Object.keys(colors).length > 0 ? colors : null;
        }

        // Helper function to collect status colors
        function collectStatusColors(type) {
            console.log(`Collecting status colors for: ${type}`);
            const container = document.getElementById(`${type}Shades`);

            if (!container) {
                console.warn(`Container not found for: ${type}Shades`);
                return null;
            }

            const swatches = container.querySelectorAll('.color-swatch');
            console.log(`Found ${swatches.length} swatches for ${type}`);

            const colors = {};

            swatches.forEach((swatch, index) => {
                const nameEl = swatch.querySelector('.color-swatch-name');
                const valueEl = swatch.querySelector('.color-swatch-value');

                const name = nameEl?.textContent?.trim();
                const value = valueEl?.textContent?.trim();

                console.log(`Status swatch ${index}: name="${name}", value="${value}"`);

                if (name && value) {
                    colors[name] = value;
                }
            });

            console.log(`Collected ${Object.keys(colors).length} status colors for ${type}:`, colors);
            return Object.keys(colors).length > 0 ? colors : null;
        }

        // Generate spacing tokens
        function generateSpacingTokens() {
            const baseUnit = parseInt(document.getElementById('spacingBaseUnit').value) || 4;
            const spacingValues = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64];

            let html = '';
            spacingValues.forEach(multiplier => {
                const value = multiplier * baseUnit;
                const tokenName = `${multiplier}`;

                html += `
                    <div class="spacing-token" onclick="copyToClipboard('${value}px')" title="Click to copy ${value}px">
                        <span class="spacing-token-name">spacing/${tokenName}</span>
                        <span class="spacing-token-value">${value}px</span>
                    </div>
                `;
            });

            document.getElementById('spacingPreview').innerHTML = html;
        }

        // Collect spacing tokens for variable creation
        function collectSpacingTokens() {
            const baseUnit = parseInt(document.getElementById('spacingBaseUnit').value) || 4;
            const spacingValues = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64];

            const spacing = {};
            spacingValues.forEach(multiplier => {
                const value = multiplier * baseUnit;
                const tokenName = `spacing-${multiplier}`;
                spacing[tokenName] = value;
            });

            return spacing;
        }

        // Generate radius tokens
        function generateRadiusTokens() {
            const radiusValues = [
                { name: 'none', value: 0 },
                { name: 'sm', value: 2 },
                { name: 'base', value: 4 },
                { name: 'md', value: 6 },
                { name: 'lg', value: 8 },
                { name: 'xl', value: 12 },
                { name: '2xl', value: 16 },
                { name: '3xl', value: 24 },
                { name: 'full', value: 9999 }
            ];

            let html = '';
            radiusValues.forEach(({ name, value }) => {
                const displayValue = value === 9999 ? '' : `${value}px`;
                html += `
                    <div class="spacing-token" onclick="copyToClipboard('${value}px')" title="Click to copy ${value}px">
                        <span class="spacing-token-name">radius-${name}</span>
                        <span class="spacing-token-value">${displayValue}</span>
                    </div>
                `;
            });

            document.getElementById('radiusPreview').innerHTML = html;
        }

        // Collect radius tokens for variable creation
        function collectRadiusTokens() {
            const radiusValues = [
                { name: 'none', value: 0 },
                { name: 'sm', value: 2 },
                { name: 'base', value: 4 },
                { name: 'md', value: 6 },
                { name: 'lg', value: 8 },
                { name: 'xl', value: 12 },
                { name: '2xl', value: 16 },
                { name: '3xl', value: 24 },
                { name: 'full', value: 9999 }
            ];

            const radius = {};
            radiusValues.forEach(({ name, value }) => {
                const tokenName = `radius-${name}`;
                radius[tokenName] = value;
            });

            return radius;
        }

        // Generate shadow tokens
        function generateShadowTokens() {
            const shadowValues = [
                { name: 'none', value: 'none' },
                { name: 'xs', value: '0 1px 2px rgba(0,0,0,0.05)' },
                { name: 'sm', value: '0 1px 3px rgba(0,0,0,0.1)' },
                { name: 'base', value: '0 2px 4px rgba(0,0,0,0.1)' },
                { name: 'md', value: '0 4px 6px rgba(0,0,0,0.1)' },
                { name: 'lg', value: '0 10px 15px rgba(0,0,0,0.1)' },
                { name: 'xl', value: '0 20px 25px rgba(0,0,0,0.1)' },
                { name: '2xl', value: '0 25px 50px rgba(0,0,0,0.15)' }
            ];

            let html = '';
            shadowValues.forEach(({ name, value }) => {
                html += `
                    <div class="spacing-token" onclick="copyToClipboard('${value}')" title="Click to copy">
                        <span class="spacing-token-name">shadow-${name}</span>
                        <span class="spacing-token-value">${name}</span>
                    </div>
                `;
            });

            document.getElementById('shadowPreview').innerHTML = html;
        }

        // Collect shadow tokens for variable creation
        function collectShadowTokens() {
            const shadowValues = [
                { name: 'none', value: 'none' },
                { name: 'xs', value: '0 1px 2px rgba(0,0,0,0.05)' },
                { name: 'sm', value: '0 1px 3px rgba(0,0,0,0.1)' },
                { name: 'base', value: '0 2px 4px rgba(0,0,0,0.1)' },
                { name: 'md', value: '0 4px 6px rgba(0,0,0,0.1)' },
                { name: 'lg', value: '0 10px 15px rgba(0,0,0,0.1)' },
                { name: 'xl', value: '0 20px 25px rgba(0,0,0,0.1)' },
                { name: '2xl', value: '0 25px 50px rgba(0,0,0,0.15)' }
            ];

            const shadows = {};
            shadowValues.forEach(({ name, value }) => {
                const tokenName = `shadow-${name}`;
                shadows[tokenName] = value;
            });

            return shadows;
        }

        // Generate stroke tokens
        function generateStrokeTokens() {
            const strokeValues = [
                { name: 'none', value: 0 },
                { name: 'thin', value: 1 },
                { name: 'base', value: 2 },
                { name: 'medium', value: 3 },
                { name: 'thick', value: 4 },
                { name: 'heavy', value: 6 }
            ];

            let html = '';
            strokeValues.forEach(({ name, value }) => {
                html += `
                    <div class="spacing-token" onclick="copyToClipboard('${value}px')" title="Click to copy ${value}px">
                        <span class="spacing-token-name">stroke-${name}</span>
                        <span class="spacing-token-value">${value}px</span>
                    </div>
                `;
            });

            document.getElementById('strokePreview').innerHTML = html;
        }

        // Collect stroke tokens for variable creation
        function collectStrokeTokens() {
            const strokeValues = [
                { name: 'none', value: 0 },
                { name: 'thin', value: 1 },
                { name: 'base', value: 2 },
                { name: 'medium', value: 3 },
                { name: 'thick', value: 4 },
                { name: 'heavy', value: 6 }
            ];

            const strokes = {};
            strokeValues.forEach(({ name, value }) => {
                const tokenName = `stroke-${name}`;
                strokes[tokenName] = value;
            });

            return strokes;
        }

        // Sync color pickers with hex inputs
        function syncColorPickers() {
            const bgColorPicker = document.getElementById('buttonBgColor');
            const bgColorHex = document.getElementById('buttonBgColorHex');
            const textColorPicker = document.getElementById('buttonTextColor');
            const textColorHex = document.getElementById('buttonTextColorHex');

            if (bgColorPicker && bgColorHex) {
                bgColorPicker.addEventListener('input', (e) => {
                    bgColorHex.value = e.target.value.toUpperCase();
                });
                bgColorHex.addEventListener('input', (e) => {
                    if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                        bgColorPicker.value = e.target.value;
                    }
                });
            }

            if (textColorPicker && textColorHex) {
                textColorPicker.addEventListener('input', (e) => {
                    textColorHex.value = e.target.value.toUpperCase();
                });
                textColorHex.addEventListener('input', (e) => {
                    if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
                        textColorPicker.value = e.target.value;
                    }
                });
            }
        }

        // Update range slider background
        function updateRangeSlider(slider) {
            const value = slider.value;
            const max = slider.max;
            const percentage = (value / max) * 100;
            slider.style.background = `linear-gradient(to right, var(--primary) 0%, var(--primary) ${percentage}%, var(--border) ${percentage}%, var(--border) 100%)`;
        }

        // Create Button Component
        function createButtonComponent() {
            const buttonText = document.getElementById('buttonText').value || 'Button';
            const bgColor = document.getElementById('buttonBgColor').value;
            const textColor = document.getElementById('buttonTextColor').value;
            const radiusValue = document.getElementById('buttonRadius').value;
            const radius = radiusValue !== '' ? parseInt(radiusValue) : 8;

            // Send message to Figma plugin
            parent.postMessage({
                pluginMessage: {
                    type: 'create-button-component',
                    buttonText: buttonText,
                    bgColor: bgColor,
                    textColor: textColor,
                    radius: radius
                }
            }, '*');
        }

        // Create Input Component
        function createInputComponent() {
            const placeholder = document.getElementById('inputPlaceholder').value || 'Enter text...';
            const borderColor = document.getElementById('inputBorderColor').value;
            // Get primary color from Foundations tab
            const primaryColor = document.getElementById('primaryColor').value;
            const textColor = document.getElementById('inputTextColor').value;
            const radiusValue = document.getElementById('inputRadius').value;
            const radius = radiusValue !== '' ? parseInt(radiusValue) : 6;

            // Send message to Figma plugin
            parent.postMessage({
                pluginMessage: {
                    type: 'create-input-component',
                    placeholder: placeholder,
                    borderColor: borderColor,
                    primaryColor: primaryColor,
                    textColor: textColor,
                    radius: radius
                }
            }, '*');
        }

        // Initialize on load - Removed, now called from startApp() after welcome screen
        // window.addEventListener('DOMContentLoaded', () => {
        //     generatePrimaryShades('#0066FF');
        //     generateSuccessShades('#00C853');
        //     generateErrorShades('#FF3B30');
        //     generateWarningShades('#FF9500');
        //     generateInfoShades('#2196F3');
        //     generateNeutralShades();
        //     generateSpacingTokens();
        //     generateRadiusTokens();
        //     generateShadowTokens();
        //     generateStrokeTokens();
        //     syncColorPickers();
        //
        //     // Initialize range sliders
        //     const radiusSlider = document.getElementById('buttonRadius');
        //     if (radiusSlider) {
        //         updateRangeSlider(radiusSlider);
        //     }
        //
        //     const inputRadiusSlider = document.getElementById('inputRadius');
        //     if (inputRadiusSlider) {
        //         updateRangeSlider(inputRadiusSlider);
        //     }
        // });
    </script>
    <script>
        // App.js content - State Management and Render Functions

        // State Management
        const state = {
            colors: {
                primary: { value: '#6366f1', description: 'Primary brand color', enabled: true },
                secondary: { value: '#8b5cf6', description: 'Secondary brand color', enabled: true },
                success: { value: '#10b981', description: 'Success state color', enabled: true },
                error: { value: '#ef4444', description: 'Error state color', enabled: true },
                warning: { value: '#f59e0b', description: 'Warning/Process color', enabled: true },
                'neutral-1000': { value: '#000000', description: 'Black', enabled: true },
                'neutral-900': { value: '#111827', description: 'Darkest gray', enabled: true },
                'neutral-800': { value: '#1f2937', description: '', enabled: true },
                'neutral-700': { value: '#374151', description: '', enabled: true },
                'neutral-600': { value: '#4b5563', description: '', enabled: true },
                'neutral-500': { value: '#6b7280', description: 'Mid gray', enabled: true },
                'neutral-400': { value: '#9ca3af', description: '', enabled: true },
                'neutral-300': { value: '#d1d5db', description: '', enabled: true },
                'neutral-200': { value: '#e5e7eb', description: '', enabled: true },
                'neutral-100': { value: '#f3f4f6', description: '', enabled: true },
                'neutral-50': { value: '#f9fafb', description: 'Lightest gray', enabled: true },
                'neutral-0': { value: '#ffffff', description: 'White', enabled: true }
            },
            typography: {
                primaryFont: 'Inter',
                secondaryFont: '',
                secondaryEnabled: false,
                styles: {
                    h1: { family: 'primary', size: 48, lineHeight: 1.2, letterSpacing: -0.5 },
                    h2: { family: 'primary', size: 40, lineHeight: 1.3, letterSpacing: -0.3 },
                    h3: { family: 'primary', size: 32, lineHeight: 1.3, letterSpacing: 0 },
                    h4: { family: 'primary', size: 24, lineHeight: 1.4, letterSpacing: 0 },
                    h5: { family: 'primary', size: 20, lineHeight: 1.4, letterSpacing: 0 },
                    h6: { family: 'primary', size: 16, lineHeight: 1.5, letterSpacing: 0 },
                    body1: { family: 'primary', size: 16, lineHeight: 1.5, letterSpacing: 0 },
                    body2: { family: 'primary', size: 14, lineHeight: 1.5, letterSpacing: 0 },
                    body3: { family: 'primary', size: 12, lineHeight: 1.4, letterSpacing: 0 },
                    body4: { family: 'primary', size: 10, lineHeight: 1.4, letterSpacing: 0 }
                },
                weights: [400, 500, 600, 700]
            }
        };

        // Typography render function
        function renderTypography() {
            const container = document.getElementById('typography-content');
            if (!container) {
                console.error('Typography content container not found');
                return;
            }

            let html = '<div style="max-width: 1200px; width: 100%;">';

            // Font Family Selection Card
            html += '<div class="card" style="margin-bottom: 20px; overflow: visible;">';
            html += '<div class="card-header" onclick="toggleCard(this)">';
            html += '<div class="card-title" style="display: flex; align-items: center; gap: 8px;">';
            html += '<span style="font-size: 16px;"></span>';
            html += '<span style="font-size: 13px; font-weight: 600;">Font Families</span>';
            html += '</div>';
            html += '<svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>';
            html += '</div>';
            html += '<div class="card-body" style="padding: 20px; overflow: visible;">';

            // Primary Font - Input Field
            html += '<div style="margin-bottom: 20px;">';
            html += '<label style="font-size: 11px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px; display: block; text-transform: uppercase; letter-spacing: 0.5px;">Primary Font</label>';
            html += '<input type="text" id="primaryFontInput" value="' + state.typography.primaryFont + '" placeholder="Enter font name (e.g., Inter, Roboto)" onchange="updatePrimaryFont(this.value)" style="width: 100%; padding: 12px 14px; border: 1px solid var(--border); border-radius: 8px; font-size: 14px; font-weight: 500; background: #0A0A0A; color: var(--text-primary); transition: all 0.2s;" onfocus="this.style.borderColor=\'var(--primary)\'" onblur="this.style.borderColor=\'var(--border)\'">';
            html += '</div>';

            // Secondary Font (Optional)
            html += '<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">';
            html += '<label class="toggle-switch"><input type="checkbox" id="secondaryToggle" ' + (state.typography.secondaryEnabled ? 'checked' : '') + ' onchange="toggleSecondaryFont(this.checked)"><span class="toggle-slider"></span></label>';
            html += '<label style="font-size: 12px; font-weight: 500; color: var(--text-primary); cursor: pointer;" onclick="document.getElementById(\'secondaryToggle\').click()">Secondary Font (Optional)</label>';
            html += '</div>';

            // Secondary Font - Input Field
            html += '<div style="margin-bottom: 20px; opacity: ' + (state.typography.secondaryEnabled ? '1' : '0.4') + '; pointer-events: ' + (state.typography.secondaryEnabled ? 'auto' : 'none') + ';">';
            html += '<input type="text" id="secondaryFontInput" value="' + (state.typography.secondaryFont || '') + '" placeholder="Enter font name (e.g., Poppins, Montserrat)" onchange="updateSecondaryFont(this.value)" style="width: 100%; padding: 12px 14px; border: 1px solid var(--border); border-radius: 8px; font-size: 14px; font-weight: 500; background: #0A0A0A; color: var(--text-primary); transition: all 0.2s;" onfocus="this.style.borderColor=\'var(--primary)\'" onblur="this.style.borderColor=\'var(--border)\'">';
            html += '</div>';

            html += '</div></div>';

            // Typography Styles Card
            html += '<div class="card">';
            html += '<div class="card-header" onclick="toggleCard(this)">';
            html += '<div class="card-title" style="display: flex; align-items: center; gap: 8px;">';
            html += '<span style="font-size: 16px;"></span>';
            html += '<span style="font-size: 13px; font-weight: 600;">Typography Styles</span>';
            html += '</div>';
            html += '<svg class="collapse-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>';
            html += '</div>';
            html += '<div class="card-body" style="padding: 16px; display: flex; flex-direction: column; gap: 16px;">';

            Object.entries(state.typography.styles).forEach(([key, style]) => {
                const fontFamily = state.typography.primaryFont;
                html += '<div style="background: #0A0A0A; border: 1px solid var(--border); border-radius: 10px; padding: 20px; transition: all 0.2s;" onmouseover="this.style.borderColor=\'var(--primary)\'; this.style.boxShadow=\'0 4px 12px rgba(200, 255, 0, 0.1)\'" onmouseout="this.style.borderColor=\'var(--border)\'; this.style.boxShadow=\'none\'">';

                // Preview text
                html += '<div style="font-family: ' + fontFamily + '; font-size: ' + style.size + 'px; font-weight: 400; line-height: ' + style.lineHeight + '; letter-spacing: ' + style.letterSpacing + 'px; color: var(--text-primary); margin-bottom: 16px;">The quick brown fox jumps over the lazy dog</div>';

                // Style info and size control
                html += '<div style="display: flex; align-items: center; justify-content: space-between;">';
                html += '<div style="display: flex; flex-direction: column; gap: 4px;">';
                html += '<div style="font-size: 11px; font-weight: 700; color: var(--text-primary); text-transform: uppercase; letter-spacing: 0.5px;">' + key.toUpperCase() + '</div>';
                html += '<div style="font-size: 11px; color: var(--text-secondary); font-family: monospace;">' + fontFamily + '  ' + style.size + 'px  undefined</div>';
                html += '</div>';

                // Size input only
                html += '<input type="number" value="' + style.size + '" onchange="updateTypographySize(\'' + key + '\', this.value)" style="width: 80px; padding: 10px 14px; background: #141414; color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; font-size: 13px; font-weight: 500; text-align: center; transition: all 0.2s;" placeholder="Size" onfocus="this.style.borderColor=\'var(--primary)\'; this.style.boxShadow=\'0 0 0 3px rgba(200, 255, 0, 0.1)\'" onblur="this.style.borderColor=\'var(--border)\'; this.style.boxShadow=\'none\'">';
                html += '</div>';

                html += '</div>';
            });

            html += '</div></div>';

            // Create Styles Button
            html += '<button class="btn btn-primary" onclick="createTextStyles()" style="width: 100%; padding: 14px; font-size: 14px; font-weight: 600; margin-top: 20px; border-radius: 8px; display: flex; align-items: center; justify-content: center; gap: 8px;">';
            html += '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" x2="15" y1="20" y2="20"/><line x1="12" x2="12" y1="4" y2="20"/></svg>';
            html += '<span>Create Text Styles in Figma</span>';
            html += '</button>';

            html += '</div>';
            container.innerHTML = html;
        }

        function updatePrimaryFont(value) {
            state.typography.primaryFont = value;
            renderTypography();
        }

        function updateSecondaryFont(value) {
            state.typography.secondaryFont = value;
            renderTypography();
        }

        function toggleSecondaryFont(enabled) {
            state.typography.secondaryEnabled = enabled;
            renderTypography();
        }

        function updateTypographySize(key, size) {
            state.typography.styles[key].size = parseInt(size);
            renderTypography();
        }

        function createTextStyles() {
            parent.postMessage({
                pluginMessage: {
                    type: 'create-text-styles',
                    typography: state.typography
                }
            }, '*');
        }

        // Initialize when DOM is ready - Removed, now called from startApp()
        // if (document.readyState === 'loading') {
        //     document.addEventListener('DOMContentLoaded', initializeTypography);
        // } else {
        //     initializeTypography();
        // }

        function initializeTypography() {
            console.log('Initializing typography...');
            renderTypography();
            console.log('Typography initialized');
        }
    </script>

    <script>
        // Icon Library UI Script
        const ICON_LIBRARIES = {
            'box-icons': {
                name: 'Box Icons',
                categories: {
                    'logos': {
                        name: 'Logos',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Box-Icon/192522ef45d183c510a068c65fbbb208ddca0813/svg/logos'
                    },
                    'regular': {
                        name: 'Regular',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Box-Icon/192522ef45d183c510a068c65fbbb208ddca0813/svg/regular'
                    },
                    'solid': {
                        name: 'Solid',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Box-Icon/192522ef45d183c510a068c65fbbb208ddca0813/svg/solid'
                    }
                }
            },
            'vuesax-icons': {
                name: 'Vuesax Icons',
                categories: {
                    'twotone': {
                        name: 'Twotone',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Vuesax-Icon/1fc373df0cef028768f13d29571b0f6e163d7d68/twotone'
                    },
                    'outline': {
                        name: 'Outline',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Vuesax-Icon/1fc373df0cef028768f13d29571b0f6e163d7d68/outline'
                    },
                    'linear': {
                        name: 'Linear',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Vuesax-Icon/1fc373df0cef028768f13d29571b0f6e163d7d68/linear'
                    },
                    'bulk': {
                        name: 'Bulk',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Vuesax-Icon/1fc373df0cef028768f13d29571b0f6e163d7d68/bulk'
                    },
                    'broken': {
                        name: 'Broken',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Vuesax-Icon/1fc373df0cef028768f13d29571b0f6e163d7d68/broken'
                    },
                    'bold': {
                        name: 'Bold',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/Vuesax-Icon/1fc373df0cef028768f13d29571b0f6e163d7d68/bold'
                    }
                }
            },
            'unicons': {
                name: 'Unicons',
                categories: {
                    'line': {
                        name: 'Line',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/unicons/41643545a256b97c0c4cd646817cf352da4ce866/line'
                    },
                    'monochrome': {
                        name: 'Monochrome',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/unicons/41643545a256b97c0c4cd646817cf352da4ce866/monochrome'
                    },
                    'solid': {
                        name: 'Solid',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/unicons/41643545a256b97c0c4cd646817cf352da4ce866/solid'
                    },
                    'thinline': {
                        name: 'Thinline',
                        baseUrl: 'https://raw.githubusercontent.com/harsh2277/unicons/41643545a256b97c0c4cd646817cf352da4ce866/thinline'
                    }
                }
            }
        };

        let selectedLibrary = null;
        let selectedCategory = null;
        let iconCache = {};

        function initIconLibrary() {
            // Diagnostic: Verify all categories are present
            console.log(' Initializing Icon Library...');
            console.log(' Available Libraries:', Object.keys(ICON_LIBRARIES));

            Object.entries(ICON_LIBRARIES).forEach(([libId, lib]) => {
                console.log(`\n ${lib.name} (${libId}):`);
                console.log('   Categories:', Object.keys(lib.categories));
                Object.entries(lib.categories).forEach(([catId, cat]) => {
                    console.log(`   - ${cat.name} (${catId}): ${cat.baseUrl}`);
                });
            });

            // Verify Vuesax specifically
            const vuesax = ICON_LIBRARIES['vuesax-icons'];
            if (vuesax) {
                console.log('\n Vuesax Icons Library Found!');
                console.log('   Total Categories:', Object.keys(vuesax.categories).length);
                const hasLinear = vuesax.categories.hasOwnProperty('linear');
                const hasBroken = vuesax.categories.hasOwnProperty('broken');
                const hasTwotone = vuesax.categories.hasOwnProperty('twotone');
                console.log('   Has Linear:', hasLinear ? '' : '');
                console.log('   Has Broken:', hasBroken ? '' : '');
                console.log('   Has Twotone:', hasTwotone ? '' : '');

                if (!hasLinear || !hasBroken || !hasTwotone) {
                    console.error(' MISSING VUESAX CATEGORIES!');
                }
            } else {
                console.error(' Vuesax Icons Library NOT FOUND!');
            }

            renderIconLibraryUI();
        }

        function renderIconLibraryUI() {
            const container = document.getElementById('iconLibraryContent');
            if (!container) return;

            container.innerHTML = `
            <div style="max-width: 900px; margin: 0 auto;">
              <div style="margin-bottom: 32px;">
                <h2 style="font-size: 24px; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                  Icon Library
                </h2>
                <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 24px;">
                  Select an icon library and optionally choose specific categories
                </p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
                  <div>
                    <label style="display: block; font-size: 13px; font-weight: 500; color: var(--text-secondary); margin-bottom: 8px;">
                      Select Icon Library
                    </label>
                    <select id="iconLibrarySelect" style="
                      width: 100%;
                      padding: 12px 16px;
                      font-size: 14px;
                      border: 2px solid var(--border);
                      border-radius: var(--radius-md);
                      background: var(--bg-card);
                      color: var(--text-primary);
                      cursor: pointer;
                      transition: all 0.2s ease;
                      font-weight: 500;
                    " onchange="onLibraryChange(this.value)">
                      <option value="">Choose a library...</option>
                      ${Object.entries(ICON_LIBRARIES).map(([id, library]) => `
                        <option value="${id}">${library.name}</option>
                      `).join('')}
                    </select>
                  </div>
                  
                  <div id="categoryDropdownContainer" style="display: none;">
                    <label style="display: block; font-size: 13px; font-weight: 500; color: var(--text-secondary); margin-bottom: 8px;">
                      Select Category (Optional)
                    </label>
                    <select id="iconCategorySelect" style="
                      width: 100%;
                      padding: 12px 16px;
                      font-size: 14px;
                      border: 2px solid var(--border);
                      border-radius: var(--radius-md);
                      background: var(--bg-card);
                      color: var(--text-primary);
                      cursor: pointer;
                      transition: all 0.2s ease;
                      font-weight: 500;
                    " onchange="onCategoryChange(this.value)">
                      <option value="all">All Categories</option>
                    </select>
                  </div>
                </div>
                
                <button 
                  id="generateAllBtn" 
                  class="btn btn-primary" 
                  onclick="generateIconsFromSelection()"
                  disabled
                  style="padding: 12px 24px; width: 100%;">
                   Generate Icons
                </button>
              </div>
              
              <div id="libraryInfo" style="display: none;">
                <div style="
                  background: var(--bg-card);
                  border: 2px solid var(--border);
                  border-radius: var(--radius-lg);
                  padding: 24px;
                  margin-bottom: 24px;
                ">
                  <h3 id="libraryName" style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: var(--text-primary);"></h3>
                  <div id="categoryList" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px;"></div>
                  <p id="libraryDescription" style="color: var(--text-secondary); font-size: 13px; line-height: 1.6;"></p>
                </div>
                
                <div style="
                  background: linear-gradient(135deg, var(--primary-light), var(--bg-accent));
                  border: 1px solid var(--primary);
                  border-radius: var(--radius-md);
                  padding: 16px 20px;
                  display: flex;
                  align-items: center;
                  gap: 12px;
                ">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color: var(--primary); flex-shrink: 0;">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 16v-4"/>
                    <path d="M12 8h.01"/>
                  </svg>
                  <p id="infoMessage" style="color: var(--text-primary); font-size: 13px; line-height: 1.5; margin: 0;">
                    Select "All Categories" to generate all icons, or choose a specific category to generate only those icons.
                  </p>
                </div>
              </div>
            </div>
          `;
        }

        function onLibraryChange(libraryId) {
            selectedLibrary = libraryId;
            selectedCategory = null;

            const generateBtn = document.getElementById('generateAllBtn');
            const libraryInfo = document.getElementById('libraryInfo');
            const categoryDropdown = document.getElementById('categoryDropdownContainer');
            const categorySelect = document.getElementById('iconCategorySelect');

            if (!libraryId) {
                generateBtn.disabled = true;
                libraryInfo.style.display = 'none';
                categoryDropdown.style.display = 'none';
                return;
            }

            // Show category dropdown
            categoryDropdown.style.display = 'block';

            // Populate category dropdown
            const library = ICON_LIBRARIES[libraryId];
            categorySelect.innerHTML = '<option value="all">All Categories</option>';
            Object.entries(library.categories).forEach(([id, category]) => {
                const option = document.createElement('option');
                option.value = id;
                option.textContent = category.name;
                categorySelect.appendChild(option);
            });

            generateBtn.disabled = false;
            libraryInfo.style.display = 'block';

            document.getElementById('libraryName').textContent = library.name;

            const categoryList = document.getElementById('categoryList');
            categoryList.innerHTML = Object.values(library.categories).map(cat =>
                `<span class="badge badge-info">${cat.name}</span>`
            ).join('');

            const categoryCount = Object.keys(library.categories).length;
            document.getElementById('libraryDescription').textContent =
                `This library contains ${categoryCount} categories. You can generate all icons or select a specific category.`;
        }

        function onCategoryChange(categoryId) {
            selectedCategory = categoryId === 'all' ? null : categoryId;

            if (!selectedLibrary) return;

            const library = ICON_LIBRARIES[selectedLibrary];
            const infoMessage = document.getElementById('infoMessage');

            if (categoryId === 'all') {
                infoMessage.textContent = `This will generate all icons from all ${Object.keys(library.categories).length} categories. Each category will be created as a separate Component Set.`;
            } else {
                const category = library.categories[categoryId];
                infoMessage.textContent = `This will generate all icons from the "${category.name}" category only.`;
            }
        }

        function selectLibrary(libraryId) {
            selectedLibrary = libraryId;
            renderCategorySelection();
        }

        function renderCategorySelection() {
            const container = document.getElementById('iconLibraryContent');
            if (!container || !selectedLibrary) return;

            const library = ICON_LIBRARIES[selectedLibrary];

            container.innerHTML = `
            <div style="max-width: 1000px; margin: 0 auto;">
              <div style="margin-bottom: 24px;">
                <button class="btn btn-secondary btn-sm" onclick="renderLibrarySelection()" style="margin-bottom: 16px;">
                   Back to Libraries
                </button>
                <h2 style="font-size: 24px; font-weight: 600; margin-bottom: 8px; color: var(--text-primary);">
                  ${library.name}
                </h2>
                <p style="color: var(--text-secondary); font-size: 14px;">
                  Select a category to browse icons
                </p>
              </div>
              
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                ${Object.entries(library.categories).map(([id, category]) => `
                  <div class="category-card" onclick="selectCategory('${id}')" style="
                    background: var(--bg-card);
                    border: 2px solid var(--border);
                    border-radius: var(--radius-md);
                    padding: 20px;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    text-align: center;
                  ">
                    <div style="
                      width: 48px;
                      height: 48px;
                      background: var(--primary-light);
                      border-radius: var(--radius-md);
                      margin: 0 auto 12px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      font-size: 24px;
                    ">
                      
                    </div>
                    <h3 style="font-size: 16px; font-weight: 600; color: var(--text-primary);">
                      ${category.name}
                    </h3>
                  </div>
                `).join('')}
              </div>
            </div>
          `;

            const style = document.createElement('style');
            style.textContent = `
            .category-card:hover {
              border-color: var(--primary) !important;
              transform: translateY(-2px);
              box-shadow: var(--shadow-md);
            }
          `;
            document.head.appendChild(style);
        }

        async function selectCategory(categoryId) {
            selectedCategory = categoryId;
            await fetchAndRenderIcons();
        }

        async function fetchIconList(baseUrl) {
            const cacheKey = baseUrl;
            if (iconCache[cacheKey]) {
                console.log(' Using cached icon list for:', baseUrl);
                return iconCache[cacheKey];
            }

            try {
                // Method 1: Try GitHub API first
                const urlParts = baseUrl.replace('https://raw.githubusercontent.com/', '').split('/');
                const owner = urlParts[0];
                const repo = urlParts[1];
                const ref = urlParts[2];
                const path = urlParts.slice(3).join('/');

                console.log(' Fetching icons for category:', path);
                console.log('   Owner:', owner);
                console.log('   Repo:', repo);
                console.log('   Ref:', ref);
                console.log('   Path:', path);

                const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${ref}`;
                console.log('   API URL:', apiUrl);
                console.log('   Base URL:', baseUrl);

                try {
                    const response = await fetch(apiUrl);
                    console.log('API Response status:', response.status);

                    if (response.ok) {
                        const data = await response.json();
                        console.log('API Response data:', data);

                        // Check if it's an array (directory listing)
                        if (Array.isArray(data)) {
                            const svgFiles = data
                                .filter(file => file.name && file.name.endsWith('.svg'))
                                .map(file => file.name);

                            if (svgFiles.length > 0) {
                                console.log(`Found ${svgFiles.length} SVG files via API`);
                                iconCache[cacheKey] = svgFiles;
                                return svgFiles;
                            }
                        } else {
                            console.warn('API returned non-array data:', data);
                        }
                    } else {
                        const errorText = await response.text();
                        console.warn(`API returned ${response.status}:`, errorText);
                    }
                } catch (apiError) {
                    console.warn('API method failed:', apiError);
                }

                // Method 2: Fallback - Use a predefined list for known repos
                console.log('Trying fallback method...');
                const knownIcons = getKnownIconList(owner, repo, path);
                if (knownIcons.length > 0) {
                    console.log(`Using known icon list: ${knownIcons.length} icons`);
                    iconCache[cacheKey] = knownIcons;
                    return knownIcons;
                }

                console.error('No icons found via API or fallback');
                return [];
            } catch (error) {
                console.error('Error fetching icon list:', error);
                return [];
            }
        }

        function getKnownIconList(owner, repo, path) {
            // Fallback icon lists for known repositories
            console.log(' getKnownIconList called with:');
            console.log('   Owner:', owner);
            console.log('   Repo:', repo);
            console.log('   Path:', path);

            // Generate icon names
            const boxIconNames = generateBoxIconNames;
            const vuesaxIconNames = generateVuesaxIconNames;

            const knownLists = {
                // Box Icons
                'harsh2277/Box-Icon/svg/logos': [
                    'bxl-500px.svg', 'bxl-adobe.svg', 'bxl-airbnb.svg', 'bxl-algolia.svg',
                    'bxl-amazon.svg', 'bxl-android.svg', 'bxl-angular.svg', 'bxl-apple.svg',
                    'bxl-audible.svg', 'bxl-baidu.svg', 'bxl-behance.svg', 'bxl-bing.svg',
                    'bxl-bitcoin.svg', 'bxl-blogger.svg', 'bxl-bootstrap.svg', 'bxl-chrome.svg',
                    'bxl-codepen.svg', 'bxl-creative-commons.svg', 'bxl-css3.svg', 'bxl-dailymotion.svg',
                    'bxl-deviantart.svg', 'bxl-digg.svg', 'bxl-digitalocean.svg', 'bxl-discord.svg',
                    'bxl-discourse.svg', 'bxl-django.svg', 'bxl-docker.svg', 'bxl-dribbble.svg',
                    'bxl-dropbox.svg', 'bxl-drupal.svg', 'bxl-ebay.svg', 'bxl-edge.svg',
                    'bxl-etsy.svg', 'bxl-facebook.svg', 'bxl-figma.svg', 'bxl-firebase.svg',
                    'bxl-firefox.svg', 'bxl-flickr.svg', 'bxl-flutter.svg', 'bxl-foursquare.svg',
                    'bxl-git.svg', 'bxl-github.svg', 'bxl-gitlab.svg', 'bxl-google.svg',
                    'bxl-html5.svg', 'bxl-instagram.svg', 'bxl-javascript.svg', 'bxl-jquery.svg',
                    'bxl-linkedin.svg', 'bxl-medium.svg', 'bxl-messenger.svg', 'bxl-microsoft.svg',
                    'bxl-nodejs.svg', 'bxl-npm.svg', 'bxl-opera.svg', 'bxl-paypal.svg',
                    'bxl-pinterest.svg', 'bxl-python.svg', 'bxl-react.svg', 'bxl-reddit.svg',
                    'bxl-sass.svg', 'bxl-shopify.svg', 'bxl-skype.svg', 'bxl-slack.svg',
                    'bxl-snapchat.svg', 'bxl-spotify.svg', 'bxl-stackoverflow.svg', 'bxl-stripe.svg',
                    'bxl-telegram.svg', 'bxl-tiktok.svg', 'bxl-trello.svg', 'bxl-tumblr.svg',
                    'bxl-twitch.svg', 'bxl-twitter.svg', 'bxl-vimeo.svg', 'bxl-visa.svg',
                    'bxl-vk.svg', 'bxl-vuejs.svg', 'bxl-whatsapp.svg', 'bxl-wikipedia.svg',
                    'bxl-windows.svg', 'bxl-wordpress.svg', 'bxl-yahoo.svg', 'bxl-yelp.svg',
                    'bxl-youtube.svg', 'bxl-zoom.svg'
                ],
                'harsh2277/Box-Icon/svg/regular': boxIconNames('bx'),
                'harsh2277/Box-Icon/svg/solid': boxIconNames('bxs'),
                // Vuesax Icons - all paths
                'harsh2277/Vuesax-Icon/twotone': vuesaxIconNames(),
                'harsh2277/Vuesax-Icon/outline': vuesaxIconNames(),
                'harsh2277/Vuesax-Icon/linear': vuesaxIconNames(),
                'harsh2277/Vuesax-Icon/bulk': vuesaxIconNames(),
                'harsh2277/Vuesax-Icon/broken': vuesaxIconNames(),
                'harsh2277/Vuesax-Icon/bold': vuesaxIconNames()
            };

            const key = `${owner}/${repo}/${path}`;
            console.log('   Looking for key:', key);
            console.log('   Available keys:', Object.keys(knownLists));

            const result = knownLists[key] || [];
            console.log('    Found', result.length, 'icons for', key);

            if (result.length === 0) {
                console.warn('    No icons found for key:', key);
                console.warn('    This category will be empty!');
            }

            return result;
        }

        function generateBoxIconNames(prefix) {
            // Common icon names for Box Icons
            const names = [
                'home', 'user', 'search', 'heart', 'star', 'menu', 'settings', 'bell',
                'mail', 'phone', 'calendar', 'camera', 'image', 'video', 'music', 'file',
                'folder', 'download', 'upload', 'share', 'link', 'lock', 'unlock', 'key',
                'edit', 'trash', 'save', 'copy', 'cut', 'paste', 'check', 'x', 'plus',
                'minus', 'arrow-up', 'arrow-down', 'arrow-left', 'arrow-right', 'chevron-up',
                'chevron-down', 'chevron-left', 'chevron-right', 'refresh', 'loader', 'cloud',
                'sun', 'moon', 'time', 'map', 'location', 'navigation', 'compass', 'globe',
                'wifi', 'bluetooth', 'battery', 'power', 'plug', 'usb', 'printer', 'monitor',
                'laptop', 'mobile', 'tablet', 'watch', 'tv', 'speaker', 'headphone', 'microphone',
                'volume', 'play', 'pause', 'stop', 'skip-next', 'skip-previous', 'fast-forward',
                'rewind', 'shuffle', 'repeat', 'list', 'grid', 'filter', 'sort', 'zoom-in',
                'zoom-out', 'fullscreen', 'minimize', 'maximize', 'info', 'help', 'question',
                'warning', 'error', 'success', 'flag', 'bookmark', 'tag', 'pin', 'paperclip',
                'message', 'chat', 'comment', 'notification', 'inbox', 'send', 'reply', 'forward',
                'cart', 'shopping-bag', 'credit-card', 'wallet', 'dollar', 'euro', 'pound', 'yen',
                'gift', 'award', 'trophy', 'medal', 'crown', 'shield', 'target', 'rocket',
                'plane', 'car', 'bus', 'train', 'bike', 'walk', 'run', 'swim'
            ];
            return names.map(name => `${prefix}-${name}.svg`);
        }

        function generateVuesaxIconNames() {
            // Comprehensive list of Vuesax icon names
            const names = [
                '3d-cube-scan', '3d-rotate', '3d-square', '24-support', 'activity', 'add', 'add-circle',
                'add-square', 'additem', 'airdrop', 'airplane', 'airplane-square', 'airpod', 'airpods',
                'alarm', 'align-bottom', 'align-horizontally', 'align-left', 'align-right', 'align-vertically',
                'aquarius', 'archive', 'archive-1', 'archive-add', 'archive-book', 'archive-minus',
                'archive-slash', 'archive-tick', 'arrange-circle', 'arrange-circle-2', 'arrange-square',
                'arrange-square-2', 'arrow', 'arrow-2', 'arrow-3', 'arrow-bottom', 'arrow-circle-down',
                'arrow-circle-left', 'arrow-circle-right', 'arrow-circle-up', 'arrow-down', 'arrow-down-1',
                'arrow-down-2', 'arrow-left', 'arrow-left-1', 'arrow-left-2', 'arrow-left-3', 'arrow-right',
                'arrow-right-1', 'arrow-right-2', 'arrow-right-3', 'arrow-square', 'arrow-square-down',
                'arrow-square-left', 'arrow-square-right', 'arrow-square-up', 'arrow-swap', 'arrow-swap-horizontal',
                'arrow-up', 'arrow-up-1', 'arrow-up-2', 'arrow-up-3', 'attach-circle', 'attach-square',
                'audio-square', 'autobrightness', 'award', 'back-square', 'backward', 'backward-5-seconds',
                'backward-10-seconds', 'backward-15-seconds', 'backward-item', 'bag', 'bag-2', 'bag-cross',
                'bag-cross-1', 'bag-happy', 'bag-tick', 'bag-tick-2', 'bag-timer', 'bank', 'barcode',
                'battery-3full', 'battery-charging', 'battery-disable', 'battery-empty', 'battery-empty-1',
                'battery-full', 'bezier', 'bill', 'bitcoin-card', 'bitcoin-convert', 'bitcoin-refresh',
                'blend', 'blend-2', 'bluetooth', 'bluetooth-2', 'bluetooth-circle', 'bluetooth-rectangle',
                'blur', 'book', 'book-1', 'book-saved', 'book-square', 'bookmark', 'bookmark-2', 'box',
                'box-1', 'box-2', 'box-add', 'box-remove', 'box-search', 'box-tick', 'box-time', 'briefcase',
                'brifecase-cross', 'brifecase-tick', 'brifecase-timer', 'broom', 'brush', 'brush-1',
                'brush-2', 'brush-3', 'brush-4', 'bubble', 'bucket', 'bucket-circle', 'bucket-square',
                'building', 'building-3', 'building-4', 'buildings', 'buildings-2', 'buliding', 'bus',
                'buy-crypto', 'cake', 'calculator', 'calendar', 'calendar-1', 'calendar-2', 'calendar-add',
                'calendar-circle', 'calendar-edit', 'calendar-remove', 'calendar-search', 'calendar-tick',
                'call', 'call-add', 'call-calling', 'call-incoming', 'call-minus', 'call-outgoing',
                'call-received', 'call-remove', 'call-slash', 'camera', 'camera-slash', 'candle',
                'candle-2', 'car', 'card', 'card-add', 'card-coin', 'card-edit', 'card-pos', 'card-receive',
                'card-remove', 'card-remove-1', 'card-send', 'card-slash', 'card-tick', 'card-tick-1',
                'cardano', 'cards', 'category', 'category-2', 'cd', 'chart', 'chart-1', 'chart-2',
                'chart-21', 'chart-3', 'chart-fail', 'chart-square', 'chart-success', 'check', 'chrome',
                'clipboard', 'clipboard-close', 'clipboard-export', 'clipboard-import', 'clipboard-text',
                'clipboard-tick', 'clock', 'clock-1', 'close-circle', 'close-square', 'cloud',
                'cloud-add', 'cloud-change', 'cloud-connection', 'cloud-cross', 'cloud-drizzle',
                'cloud-fog', 'cloud-lightning', 'cloud-minus', 'cloud-notif', 'cloud-plus', 'cloud-remove',
                'cloud-snow', 'cloud-sunny', 'code', 'code-1', 'code-circle', 'coffee', 'coin',
                'coin-1', 'colorfilter', 'colors-square', 'command', 'command-square', 'component',
                'computing', 'convert', 'convert-3d-cube', 'convert-card', 'convertshape', 'convertshape-2',
                'copy', 'copy-success', 'copyright', 'courthouse', 'cpu', 'cpu-charge', 'cpu-setting',
                'creative-commons', 'crop', 'crown', 'crown-1', 'cup', 'danger', 'data', 'data-2',
                'designtools', 'device-message', 'devices', 'diagram', 'diamonds', 'direct', 'direct-down',
                'direct-inbox', 'direct-left', 'direct-normal', 'direct-notification', 'direct-right',
                'direct-send', 'direct-up', 'directbox-default', 'directbox-notif', 'directbox-receive',
                'directbox-send', 'discount-circle', 'discount-shape', 'discover', 'dislike', 'document',
                'document-1', 'document-cloud', 'document-code', 'document-code-2', 'document-copy',
                'document-download', 'document-favorite', 'document-filter', 'document-forward',
                'document-like', 'document-normal', 'document-previous', 'document-sketch', 'document-text',
                'document-text-1', 'document-upload', 'dollar-circle', 'dollar-square', 'driver',
                'driver-2', 'driver-refresh', 'driving', 'drop', 'edit', 'edit-2', 'electricity',
                'element-2', 'element-3', 'element-4', 'element-equal', 'element-plus', 'emoji-happy',
                'emoji-normal', 'emoji-sad', 'empty-wallet', 'empty-wallet-add', 'empty-wallet-change',
                'empty-wallet-remove', 'empty-wallet-tick', 'empty-wallet-time', 'eraser', 'eraser-1',
                'export', 'export-1', 'export-2', 'export-3', 'external-drive', 'eye', 'eye-slash',
                'fatrows', 'favorite-chart', 'filter', 'filter-add', 'filter-edit', 'filter-remove',
                'filter-search', 'filter-square', 'filter-tick', 'finger-cricle', 'finger-scan',
                'firstline', 'flag', 'flag-2', 'flash', 'flash-1', 'flash-circle', 'flash-circle-1',
                'flash-slash', 'folder', 'folder-2', 'folder-add', 'folder-cloud', 'folder-connection',
                'folder-cross', 'folder-favorite', 'folder-minus', 'folder-open', 'forbidden',
                'forbidden-2', 'format-circle', 'format-square', 'forward', 'forward-5-seconds',
                'forward-10-seconds', 'forward-15-seconds', 'forward-item', 'forward-square', 'frame',
                'frame-1', 'frame-2', 'frame-3', 'frame-4', 'gallery', 'gallery-add', 'gallery-edit',
                'gallery-export', 'gallery-favorite', 'gallery-import', 'gallery-remove', 'gallery-slash',
                'gallery-tick', 'game', 'gameboy', 'gas-station', 'gemini', 'gemini-2', 'ghost',
                'gift', 'glass', 'glass-1', 'global', 'global-edit', 'global-refresh', 'global-search',
                'gps', 'gps-slash', 'grammerly', 'graph', 'grid-1', 'grid-2', 'grid-3', 'grid-4',
                'grid-5', 'grid-6', 'grid-7', 'grid-8', 'grid-9', 'grid-edit', 'grid-eraser',
                'grid-lock', 'happyemoji', 'hashtag', 'hashtag-1', 'hashtag-down', 'hashtag-up',
                'headphone', 'headphones', 'health', 'heart', 'heart-add', 'heart-circle', 'heart-edit',
                'heart-remove', 'heart-search', 'heart-slash', 'heart-tick', 'hierarchy', 'hierarchy-2',
                'hierarchy-3', 'hierarchy-square', 'hierarchy-square-2', 'hierarchy-square-3', 'home',
                'home-1', 'home-2', 'home-hashtag', 'home-trend-down', 'home-trend-up', 'home-wifi',
                'hospital', 'house', 'house-2', 'icon', 'image', 'import', 'import-1', 'import-2',
                'info-circle', 'information', 'instagram', 'judge', 'kanban', 'key', 'key-square',
                'keyboard', 'keyboard-open', 'lamp', 'lamp-1', 'lamp-charge', 'lamp-on', 'lamp-slash',
                'language-circle', 'language-square', 'layer', 'level', 'lifebuoy', 'like', 'like-1',
                'like-dislike', 'like-shapes', 'like-tag', 'link', 'link-1', 'link-2', 'link-21',
                'link-circle', 'link-square', 'location', 'location-add', 'location-cross',
                'location-minus', 'location-slash', 'location-tick', 'lock', 'lock-1', 'lock-circle',
                'lock-slash', 'login', 'login-1', 'logout', 'logout-1', 'lovely', 'magicpen', 'magic-star',
                'main-component', 'man', 'map', 'map-1', 'mask', 'mask-1', 'mask-2', 'math', 'maximize',
                'maximize-1', 'maximize-2', 'maximize-3', 'maximize-4', 'maximize-21', 'maximize-circle',
                'medal', 'medal-star', 'menu', 'menu-board', 'message', 'message-2', 'message-add',
                'message-add-1', 'message-circle', 'message-edit', 'message-favorite', 'message-minus',
                'message-notif', 'message-programming', 'message-question', 'message-remove',
                'message-search', 'message-square', 'message-text', 'message-text-1', 'message-tick',
                'message-time', 'messages', 'messages-1', 'messages-2', 'messages-3', 'microphone',
                'microphone-2', 'microphone-slash', 'microphone-slash-1', 'microscope', 'milk', 'mini-music-sqaure',
                'minus', 'minus-cirlce', 'minus-square', 'mirror', 'mirroring-screen', 'mobile',
                'mobile-programming', 'money', 'money-2', 'money-3', 'money-4', 'money-add', 'money-change',
                'money-forbidden', 'money-recive', 'money-remove', 'money-send', 'money-tick', 'money-time',
                'moneys', 'monitor', 'monitor-mobbile', 'monitor-recorder', 'moon', 'more', 'more-2',
                'more-circle', 'more-square', 'mouse', 'mouse-1', 'mouse-circle', 'mouse-square',
                'music', 'music-circle', 'music-dashboard', 'music-filter', 'music-library-2',
                'music-play', 'music-playlist', 'music-square', 'music-square-add', 'music-square-remove',
                'music-square-search', 'musicnote', 'next', 'note', 'note-1', 'note-2', 'note-21',
                'note-add', 'note-favorite', 'note-remove', 'note-square', 'note-text', 'notification',
                'notification-1', 'notification-bing', 'notification-circle', 'notification-favorite',
                'notification-status', 'omega-circle', 'omega-square', 'paintbucket', 'paperclip',
                'paperclip-2', 'password-check', 'path', 'path-2', 'path-square', 'pause', 'pause-circle',
                'pen-add', 'pen-close', 'pen-remove', 'pen-tool', 'pen-tool-2', 'people', 'percentage-circle',
                'percentage-square', 'personalcard', 'pet', 'pharagraphspacing', 'picture-frame',
                'play', 'play-add', 'play-circle', 'play-cricle', 'play-remove', 'presention-chart',
                'previous', 'printer', 'printer-slash', 'profile', 'profile-2user', 'profile-add',
                'profile-circle', 'profile-delete', 'profile-remove', 'profile-tick', 'programming-arrow',
                'programming-arrows', 'quote-down', 'quote-down-circle', 'quote-down-square', 'quote-up',
                'quote-up-circle', 'quote-up-square', 'radar', 'radar-1', 'radar-2', 'radio', 'ram',
                'ram-2', 'ranking', 'ranking-1', 'receipt', 'receipt-1', 'receipt-2', 'receipt-2-1',
                'receipt-add', 'receipt-discount', 'receipt-disscount', 'receipt-edit', 'receipt-item',
                'receipt-minus', 'receipt-search', 'receipt-square', 'receipt-text', 'receive-square',
                'receive-square-2', 'received', 'record', 'record-circle', 'recovery-convert', 'redo',
                'refresh', 'refresh-2', 'refresh-circle', 'refresh-left-square', 'refresh-right-square',
                'refresh-square-2', 'repeat', 'repeat-circle', 'repeate-music', 'repeate-one', 'reserve',
                'rotate-left', 'rotate-left-1', 'rotate-right', 'rotate-right-1', 'route-square',
                'routing', 'routing-2', 'row-horizontal', 'row-vertical', 'ruler', 'ruler&pen', 'safe-home',
                'sagittarius', 'save-2', 'save-add', 'save-minus', 'save-remove', 'scan', 'scan-barcode',
                'scanner', 'scanning', 'scissor', 'scissor-1', 'screenmirroring', 'scroll', 'search-favorite',
                'search-favorite-1', 'search-normal', 'search-normal-1', 'search-status', 'search-status-1',
                'search-zoom-in', 'search-zoom-in-1', 'search-zoom-out', 'search-zoom-out-1', 'security',
                'security-card', 'security-safe', 'security-time', 'security-user', 'send', 'send-1',
                'send-2', 'send-sqaure-2', 'send-square', 'setting', 'setting-2', 'setting-3', 'setting-4',
                'setting-5', 'settings', 'shapes', 'shapes-1', 'share', 'shield', 'shield-cross',
                'shield-search', 'shield-security', 'shield-slash', 'shield-tick', 'ship', 'shop',
                'shop-add', 'shop-remove', 'shopping-bag', 'shopping-cart', 'shuffle', 'sidebar-bottom',
                'sidebar-left', 'sidebar-right', 'sidebar-top', 'signpost', 'simcard', 'simcard-1',
                'simcard-2', 'size', 'slash', 'slider', 'slider-horizontal', 'slider-horizontal-1',
                'slider-vertical', 'slider-vertical-1', 'smallcaps', 'smart-car', 'smart-home',
                'smileys', 'sms', 'sms-edit', 'sms-notification', 'sms-search', 'sms-star', 'sms-tracking',
                'sort', 'sound', 'speaker', 'speedometer', 'star', 'star-1', 'star-slash', 'status',
                'status-up', 'sticker', 'stickynote', 'stop', 'stop-circle', 'story', 'strongbox',
                'strongbox-2', 'subtitle', 'sun', 'sun-1', 'sun-fog', 'tag', 'tag-2', 'tag-cross',
                'tag-right', 'tag-user', 'task', 'task-square', 'teacher', 'text', 'text-block',
                'text-bold', 'text-italic', 'text-underline', 'textalign-center', 'textalign-justifycenter',
                'textalign-justifyleft', 'textalign-justifyright', 'textalign-left', 'textalign-right',
                'tick-circle', 'tick-square', 'ticket', 'ticket-2', 'ticket-discount', 'ticket-expired',
                'ticket-star', 'timer', 'timer-1', 'timer-pause', 'timer-start', 'toggle-off',
                'toggle-off-circle', 'toggle-on', 'toggle-on-circle', 'trade', 'transaction-minus',
                'translate', 'trash', 'tree', 'trend-down', 'trend-up', 'triangle', 'truck', 'truck-fast',
                'truck-remove', 'truck-tick', 'truck-time', 'trush-square', 'undo', 'unlimited',
                'unlock', 'user', 'user-add', 'user-cirlce-add', 'user-edit', 'user-minus', 'user-octagon',
                'user-remove', 'user-search', 'user-square', 'user-tag', 'user-tick', 'verify', 'video',
                'video-add', 'video-circle', 'video-horizontal', 'video-octagon', 'video-play',
                'video-remove', 'video-slash', 'video-square', 'video-tick', 'video-time', 'video-vertical',
                'voice-cricle', 'voice-square', 'volume-cross', 'volume-high', 'volume-low',
                'volume-low-1', 'volume-mute', 'volume-slash', 'volume-up', 'wallet', 'wallet-1',
                'wallet-2', 'wallet-3', 'wallet-add', 'wallet-add-1', 'wallet-check', 'wallet-minus',
                'wallet-money', 'wallet-remove', 'wallet-search', 'warning-2', 'watch', 'watch-status',
                'weight', 'weight-1', 'wifi', 'wifi-square', 'wind', 'wind-2', 'woman', 'xd'
            ];
            return names.map(name => `${name}.svg`);
        }

        async function fetchAndRenderIcons() {
            const container = document.getElementById('iconLibraryContent');
            if (!container || !selectedLibrary || !selectedCategory) return;

            const library = ICON_LIBRARIES[selectedLibrary];
            const category = library.categories[selectedCategory];

            container.innerHTML = `
            <div style="text-align: center; padding: 60px 20px;">
              <div style="
                width: 48px;
                height: 48px;
                border: 4px solid var(--border);
                border-top-color: var(--primary);
                border-radius: 50%;
                margin: 0 auto 16px;
                animation: spin 1s linear infinite;
              "></div>
              <p style="color: var(--text-secondary);">Loading icons...</p>
            </div>
          `;

            const iconList = await fetchIconList(category.baseUrl);

            if (iconList.length === 0) {
                container.innerHTML = `
              <div class="empty-state">
                <div class="empty-state-icon"></div>
                <div class="empty-state-title">No icons found</div>
                <div class="empty-state-description">
                  Unable to load icons from this category
                </div>
                <button class="btn btn-secondary" onclick="renderCategorySelection()" style="margin-top: 20px;">
                  Back to Categories
                </button>
              </div>
            `;
                return;
            }

            renderIconGrid(iconList);
        }

        function renderIconGrid(iconList) {
            const container = document.getElementById('iconLibraryContent');
            const library = ICON_LIBRARIES[selectedLibrary];
            const category = library.categories[selectedCategory];

            container.innerHTML = `
            <div style="max-width: 1200px; margin: 0 auto;">
              <div style="
                position: sticky;
                top: 0;
                background: var(--bg-app);
                padding: 16px 0;
                margin-bottom: 24px;
                border-bottom: 1px solid var(--border);
                z-index: 10;
              ">
                <button class="btn btn-secondary btn-sm" onclick="renderCategorySelection()" style="margin-bottom: 12px;">
                   Back to Categories
                </button>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <div>
                    <h2 style="font-size: 20px; font-weight: 600; margin-bottom: 4px; color: var(--text-primary);">
                      ${library.name} / ${category.name}
                    </h2>
                    <p style="color: var(--text-secondary); font-size: 13px;">
                      ${iconList.length} icons available
                    </p>
                  </div>
                  <button class="btn btn-primary" onclick="generateAllIcons()">
                    Generate All Icons
                  </button>
                </div>
              </div>
              
              <div id="iconGrid" style="
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 12px;
              ">
                ${iconList.map(iconName => `
                  <div class="icon-item" onclick="insertSingleIcon('${iconName}')" style="
                    background: var(--bg-card);
                    border: 1px solid var(--border);
                    border-radius: var(--radius-md);
                    padding: 16px;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 8px;
                  ">
                    <div class="icon-preview" data-icon="${iconName}" style="
                      width: 24px;
                      height: 24px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    ">
                      <div style="
                        width: 20px;
                        height: 20px;
                        background: var(--border);
                        border-radius: 4px;
                      "></div>
                    </div>
                    <span style="
                      font-size: 10px;
                      color: var(--text-tertiary);
                      text-align: center;
                      word-break: break-word;
                      line-height: 1.2;
                    ">${iconName.replace('.svg', '')}</span>
                  </div>
                `).join('')}
              </div>
            </div>
          `;

            const style = document.createElement('style');
            style.textContent = `
            .icon-item:hover {
              border-color: var(--primary) !important;
              transform: translateY(-2px);
              box-shadow: var(--shadow-md);
            }
            @keyframes spin {
              to { transform: rotate(360deg); }
            }
          `;
            document.head.appendChild(style);

            loadIconPreviews(iconList.slice(0, 50));
        }

        async function loadIconPreviews(iconList) {
            const library = ICON_LIBRARIES[selectedLibrary];
            const category = library.categories[selectedCategory];

            for (const iconName of iconList) {
                const preview = document.querySelector(`.icon-preview[data-icon="${iconName}"]`);
                if (!preview) continue;

                try {
                    const url = `${category.baseUrl}/${iconName}`;
                    const response = await fetch(url);
                    if (response.ok) {
                        const svgText = await response.text();
                        preview.innerHTML = svgText;

                        const svg = preview.querySelector('svg');
                        if (svg) {
                            svg.style.width = '24px';
                            svg.style.height = '24px';
                            svg.style.color = 'var(--text-primary)';
                        }
                    }
                } catch (error) {
                    console.error(`Error loading preview for ${iconName}:`, error);
                }
            }
        }

        function insertSingleIcon(iconName) {
            if (!selectedLibrary || !selectedCategory) return;

            parent.postMessage({
                pluginMessage: {
                    type: 'insert-single-icon',
                    libraryId: selectedLibrary,
                    categoryId: selectedCategory,
                    iconName: iconName
                }
            }, '*');
        }

        function generateAllIcons() {
            if (!selectedLibrary || !selectedCategory) return;

            const library = ICON_LIBRARIES[selectedLibrary];
            const category = library.categories[selectedCategory];

            const iconElements = document.querySelectorAll('.icon-preview');
            const iconList = Array.from(iconElements).map(el => el.dataset.icon);

            if (iconList.length === 0) {
                alert('No icons to generate');
                return;
            }

            if (!confirm(`Generate ${iconList.length} icons from ${library.name} / ${category.name}?`)) {
                return;
            }

            parent.postMessage({
                pluginMessage: {
                    type: 'generate-icon-library',
                    libraryId: selectedLibrary,
                    categoryId: selectedCategory,
                    iconList: iconList
                }
            }, '*');
        }

        async function generateIconsFromSelection() {
            if (!selectedLibrary) return;

            const library = ICON_LIBRARIES[selectedLibrary];
            const generateBtn = document.getElementById('generateAllBtn');
            const originalText = generateBtn.innerHTML;

            generateBtn.disabled = true;
            generateBtn.innerHTML = ' Fetching icons...';

            console.log('=== GENERATE ICONS STARTED ===');
            console.log('Selected library:', selectedLibrary);
            console.log('Selected category:', selectedCategory);

            try {
                if (selectedCategory) {
                    // Generate single category
                    const category = library.categories[selectedCategory];
                    console.log('Fetching icons for category:', selectedCategory);
                    console.log('Base URL:', category.baseUrl);

                    const iconList = await fetchIconList(category.baseUrl);
                    console.log('Icon list received:', iconList.length, 'icons');
                    console.log('First 10 icons:', iconList.slice(0, 10));

                    if (iconList.length === 0) {
                        console.error('NO ICONS FOUND!');
                        alert('No icons found in this category. Check browser console (F12) for details.');
                        generateBtn.disabled = false;
                        generateBtn.innerHTML = originalText;
                        return;
                    }

                    console.log('Showing confirmation dialog...');
                    if (!confirm(`Generate ${iconList.length} icons from ${library.name} / ${category.name}?`)) {
                        console.log('User cancelled');
                        generateBtn.disabled = false;
                        generateBtn.innerHTML = originalText;
                        return;
                    }

                    console.log('User confirmed, sending message to plugin...');
                    generateBtn.innerHTML = ' Generating...';

                    const message = {
                        pluginMessage: {
                            type: 'generate-icon-library',
                            libraryId: selectedLibrary,
                            categoryId: selectedCategory,
                            iconList: iconList
                        }
                    };
                    console.log('Sending message:', message);
                    parent.postMessage(message, '*');
                    console.log('Message sent!');

                } else {
                    // Generate all categories
                    console.log('Generating all categories...');
                    const allCategories = [];
                    for (const [categoryId, category] of Object.entries(library.categories)) {
                        console.log('Fetching icons for category:', categoryId);
                        const iconList = await fetchIconList(category.baseUrl);
                        console.log(`${categoryId}: ${iconList.length} icons`);

                        if (iconList.length > 0) {
                            allCategories.push({
                                categoryId,
                                categoryName: category.name,
                                iconList
                            });
                        }
                    }

                    console.log('Total categories with icons:', allCategories.length);

                    if (allCategories.length === 0) {
                        console.error('NO CATEGORIES WITH ICONS FOUND!');
                        alert('No icons found in this library. Check browser console (F12) for details.');
                        generateBtn.disabled = false;
                        generateBtn.innerHTML = originalText;
                        return;
                    }

                    const totalIcons = allCategories.reduce((sum, cat) => sum + cat.iconList.length, 0);
                    console.log('Total icons:', totalIcons);

                    if (!confirm(`Generate ${totalIcons} icons from ${allCategories.length} categories?\n\nThis will create:\n${allCategories.map(c => ` ${c.categoryName}: ${c.iconList.length} icons`).join('\n')}`)) {
                        console.log('User cancelled');
                        generateBtn.disabled = false;
                        generateBtn.innerHTML = originalText;
                        return;
                    }

                    console.log('User confirmed, sending message to plugin...');
                    generateBtn.innerHTML = ' Generating...';

                    const message = {
                        pluginMessage: {
                            type: 'generate-all-library-icons',
                            libraryId: selectedLibrary,
                            categories: allCategories
                        }
                    };
                    console.log('Sending message:', message);
                    parent.postMessage(message, '*');
                    console.log('Message sent!');
                }

            } catch (error) {
                console.error('ERROR in generateIconsFromSelection:', error);
                alert('Error fetching icons: ' + error.message + '\nCheck browser console (F12) for details.');
                generateBtn.disabled = false;
                generateBtn.innerHTML = originalText;
            }
        }

        async function generateAllIconsFromLibrary() {
            if (!selectedLibrary) return;

            const library = ICON_LIBRARIES[selectedLibrary];
            const generateBtn = document.getElementById('generateAllBtn');
            const originalText = generateBtn.innerHTML;

            // Disable button and show loading
            generateBtn.disabled = true;
            generateBtn.innerHTML = ' Fetching icons...';

            try {
                // Fetch icon lists for all categories
                const allCategories = [];
                for (const [categoryId, category] of Object.entries(library.categories)) {
                    const iconList = await fetchIconList(category.baseUrl);
                    if (iconList.length > 0) {
                        allCategories.push({
                            categoryId,
                            categoryName: category.name,
                            iconList
                        });
                    }
                }

                if (allCategories.length === 0) {
                    alert('No icons found in this library');
                    generateBtn.disabled = false;
                    generateBtn.innerHTML = originalText;
                    return;
                }

                const totalIcons = allCategories.reduce((sum, cat) => sum + cat.iconList.length, 0);

                if (!confirm(`Generate ${totalIcons} icons from ${allCategories.length} categories?\n\nThis will create:\n${allCategories.map(c => ` ${c.categoryName}: ${c.iconList.length} icons`).join('\n')}`)) {
                    generateBtn.disabled = false;
                    generateBtn.innerHTML = originalText;
                    return;
                }

                generateBtn.innerHTML = ' Generating...';

                // Send to plugin
                parent.postMessage({
                    pluginMessage: {
                        type: 'generate-all-library-icons',
                        libraryId: selectedLibrary,
                        categories: allCategories
                    }
                }, '*');

            } catch (error) {
                console.error('Error generating icons:', error);
                alert('Error fetching icons. Please try again.');
                generateBtn.disabled = false;
                generateBtn.innerHTML = originalText;
            }
        }

        window.initIconLibrary = initIconLibrary;
        window.onLibraryChange = onLibraryChange;
        window.onCategoryChange = onCategoryChange;
        window.generateIconsFromSelection = generateIconsFromSelection;
        window.generateAllIconsFromLibrary = generateAllIconsFromLibrary;
        window.selectLibrary = selectLibrary;
        window.selectCategory = selectCategory;
        window.renderCategorySelection = renderCategorySelection;
        window.insertSingleIcon = insertSingleIcon;
        window.generateAllIcons = generateAllIcons;

        // Listen for messages from plugin to re-enable button
        window.addEventListener('message', (event) => {
            const msg = event.data.pluginMessage;
            if (!msg) return;

            console.log('Received message from plugin:', msg);

            if (msg.type === 'generation-complete') {
                const generateBtn = document.getElementById('generateAllBtn');
                if (generateBtn) {
                    generateBtn.disabled = false;
                    generateBtn.innerHTML = ' Generate Icons';
                }
            }
        });
    </script>
</body>

</html>